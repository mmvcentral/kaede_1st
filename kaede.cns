
;変数使用表
;　1 = キャラクターのモードチェンジ
;　2 = 剣質判別（0.力　1.技)　
;　3 = 覚醒時ライフ減少onoff
;　4 = スロー処理
;　5 = ステート内の自由変数
;　6 = ステート内の自由変数２
;　7 = 裏周り用反撃
;　8 = 起き上がり投げ無敵判別
;　9 = 勝利判定
; 10 = プレイヤーの向き設定
; 11 = 覚醒onoffスイッチ
; 12 = KOサウンド
; 13 = 開幕記憶
; 14 = 敵ID識別
; 15 = 小ジャンプ(0.ノーマル　1.小)
; 16 = 敵攻撃モーション硬直識別
; 17 = 牽制疾風
; 18 = 覚醒空牙固め
; 19 = 投げ無敵判別
; 20 = 投げ無敵判別
; 21 = 投げ無敵判別
; 22 = 受け身無敵確認
; 23 = 12P用
; 24 = 
; 25 = KO関係
; 26 = 敵の攻撃後硬直判別
; 27 =
; 28 =
; 29 = 
; 30 = AI判定(にしたいな…)
; 31 = 使用済み
; 32 = 覚醒スイッチ
; 33 = 
; 34 = タッグ生死判定
; 35 = 
; 36 = 起き攻め空牙学習
; 37 = 起き攻め疾風学習
; 38 = 使用済み
; 39 = 昇龍切り替えし不能判定
; 40 = 昇龍切り替えし不能判定
; 41 = 昇龍切り替えし不能判定
; 42 = 弱斬り割り込み学習
; 43 = 弱斬り割り込み学習
; 44 = 弱斬り割り込み学習
; 45 = 中段学習
; 46 = 中段学習 
; 47 = 中段学習 
; 48 = 下段学習
; 49 = 下段学習
; 50 = 下段学習
; 51 = 敵ID識別
; 52 = ダッシュ識別
; 53 = 乱舞奥義スイッチ
; 54 = 色々、主にコンボ用
; 55 = ガード記述
; 56 = 起き上がり時間計測
; 57 = 使用済み
; 58 = 起き上がりガード
; 59 使用済み

; f(1) = 
; f(2) = グレイズ
; f(3) = 焦咆吼割り込み判別
; f(4) = 焦咆吼割り込み判別
; f(5) = ガード不能判別
; f(6) = 
; f(7) = 重力計算
; f(8) = 
; f(9) = 
; f(10) = 追い打ち判定
; f(11) = 受け身無敵判別
; f(12) = 
; f(13) = 
; f(14) = 
; f(15) = 
; f(16) = 超奥義演出
; f(17) = 
; f(18) = 
; f(19) = 
; f(20) = 
; f(21) = 
; f(22) = 
; f(23) = 
; f(24) = 
; f(25) = 
; f(26) = 
; f(27) = 
; f(28) = 
; f(29) = 
; f(30) = 
; f(31) = 
; f(32) = 
; f(33) = 
; f(34) = 
; f(35) = 弾き率自重スイッチ
; f(36) = 
; f(37) = 受身制御
; f(38) = 下段、中段判定

[Data]
life = 1000
power = 1000
attack = 100
defence = 120         ;覚醒前はlifeadd等で補正を掛けてあるのでDEFは約100。コマンドや２ラウンド目の      
fall.defence_up = 50  ;覚醒がある関係上、ここは弄らないで下さい。弄る場合は最下部の防御補正欄にて。
liedown.time = 20
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 255
IntPersistIndex = 0
FloatPersistIndex = 40

[Size]
xscale = 1           ;Horizontal scaling factor.
yscale = 1          ;Vertical scaling factor.
ground.back = 15     ;Player width (back, ground)
ground.front = 16    ;Player width (front, ground)
air.back = 12        ;Player width (back, air)
air.front = 12       ;Player width (front, air)
height = 60          ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = -5, -90   ;Approximate position of head
mid.pos = -5, -60    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 2.4      ;Walk forward
walk.back = -2.2     ;Walk backward
run.fwd  = 4.6, 0    ;Run forward (x, y)
run.back = -4.5,-3.8 ;Hop backward (x, y)
jump.neu = 0,-11.0    ;Neutral jumping velocity (x, y)
jump.back = -3    ;Jump back Speed (x, y)
jump.fwd = 3       ;Jump forward Speed (x, y)
runjump.back = -5 ;Running jump speeds (opt)
runjump.fwd = 5      ;.
airjump.neu = 0,-8.1      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.

[Movement]
airjump.num = 0      ;Number of air jumps allowed (opt)
airjump.height = 35  ;Minimum distance from ground before you can air jump (opt)
yaccel = .53         ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching

;---------------------------------------------------------------------------
; Variable usage:
; This is a record of the variables that KFM uses. Keeping a record of your
; variable usage helps you avoid careless mistakes later.
; var(1)  - Used in kfm.cmd for combo condition (updated every tick)
; var(2)  - Used in Kung Fu Throw (state 800) to remember if fwd was being
;           held (remembered from state 800 through state 810).

;---------------------------------------------------------------------------
; ダッシュ
[Statedef 100]
type    = S
physics = N
anim = 100+ var(1)*3000
sprpriority = 1
ctrl = 0

[State 100, 1]
type = PlaySnd
trigger1 = Time = 0
value = 107,0
channel = 1
loop = 1

[State 100, 1]
type = VelSet
trigger1 = 1
x = 6;const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
triggerall = var(30) = 0
trigger1 = command = "holdup"
value = 40

[State 100, 4] 
type = ChangeState
triggerall = var(30) = 0
triggerall = palno = 12
trigger1 = command != "holdfwd"
trigger2 = command = "holddown"
value = 0 
ctrl = 1

[State 100, 4] 
type = ChangeState
triggerall = var(30) = 0
triggerall = palno != 12
trigger1 = command != "holdfwd"
trigger2 = command = "holddown"
value = 101

;---------------------[変数]
[State a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[State a]
type = varset
trigger1 = time >= 10
v = 5
value = 1

;---------------------[エフェクト]

[State 100, 4] 
type = ChangeState
triggerall = var(30) != 0
triggerall = !(fvar(2) < 0 && (p2bodydist X > 0 || (enemynear(var(34)),statetype != A &&  p2bodydist X >= 10)))
triggerall = !(enemynear(var(34)),stateno = 902)
triggerall = !(enemynear(var(34)),hitdefattr = SCA,AT)
triggerall = palno = 12
trigger1 = InGuardDist || (helper(40000),inguarddist) || (enemynear(var(34)),movetype = A && var(1) = 1)
trigger1 = !(p2bodydist X <= (68 + enemynear(var(34)),vel X*4)) && var(1) = 0 && (Enemynear(var(34)),numproj <= 0) || var(1) = 1
trigger1 = !(enemynear(var(34)),animtime <= -(4 + (P2BodyDist X - (68 + (1-2*(enemynear(var(34)),facing=facing))*EnemyNear(var(34)),Vel X*4))/7.5) && enemynear(var(34)),animtime >= -12)
trigger2 = PlayerIDExist(helper(60000),Var(3)) && PlayerID(helper(60000),Var(3)),hitdefattr = SCA
trigger3 = PlayerIDExist(helper(60000),Var(5)) && PlayerID(helper(60000),Var(5)),hitdefattr = SCA
trigger4 = PlayerIDExist(helper(60000),Var(7)) && PlayerID(helper(60000),Var(7)),hitdefattr = SCA
trigger5 = PlayerIDExist(helper(60000),Var(9)) && PlayerID(helper(60000),Var(9)),hitdefattr = SCA
trigger6 = PlayerIDExist(helper(60000),Var(11))&&PlayerID(helper(60000),Var(11)),hitdefattr = SCA
trigger7 = PlayerIDExist(helper(60000),Var(13))&&PlayerID(helper(60000),Var(13)),hitdefattr = SCA
trigger8 = PlayerIDExist(helper(60000),Var(15))&&PlayerID(helper(60000),Var(15)),hitdefattr = SCA
trigger9 = PlayerIDExist(helper(60000),Var(17))&&PlayerID(helper(60000),Var(17)),hitdefattr = SCA
trigger10 = PlayerIDExist(helper(60000),Var(19))&&PlayerID(helper(60000),Var(19)),hitdefattr = SCA
trigger11 = PlayerIDExist(helper(60000),Var(21))&&PlayerID(helper(60000),Var(21)),hitdefattr = SCA
trigger12 = PlayerIDExist(helper(60000),Var(23))&&PlayerID(helper(60000),Var(23)),hitdefattr = SCA
trigger13 = PlayerIDExist(helper(60000),Var(25))&&PlayerID(helper(60000),Var(25)),hitdefattr = SCA
trigger14 = PlayerIDExist(helper(60000),Var(27))&&PlayerID(helper(60000),Var(27)),hitdefattr = SCA
trigger15 = PlayerIDExist(helper(60000),Var(29))&&PlayerID(helper(60000),Var(29)),hitdefattr = SCA
trigger16 = PlayerIDExist(helper(60000),Var(31))&&PlayerID(helper(60000),Var(31)),hitdefattr = SCA
trigger17 = enemynear(var(34)),movetype = A 
trigger17 = (enemy(0),alive && enemy(1),alive && numenemy = 2) || enemynear(var(34)),animtime >= -4
trigger18 = InGuardDist || (helper(40000),inguarddist)
trigger18 = enemynear(var(34)),hitdefattr = SCA,AA || enemynear(var(34)),hitdefattr = SCA,AP || var(1) = 1 || enemy,numproj > 0
value = 0
ctrl = 1

[State 100, 4] 
type = ChangeState
triggerall = var(30) != 0
triggerall = !(fvar(2) < 0 && (p2bodydist X > 0 || (enemynear(var(34)),statetype != A &&  p2bodydist X >= 10)))
triggerall = !(enemynear(var(34)),stateno = 902)
triggerall = !(enemynear(var(34)),hitdefattr = SCA,AT)
triggerall = palno != 12
trigger1 = InGuardDist || (helper(40000),inguarddist) || (enemynear(var(34)),movetype = A && var(1) = 1)
trigger1 = !(p2bodydist X <= (68 + enemynear(var(34)),vel X*4)) && var(1) = 0 && (Enemynear(var(34)),numproj <= 0) || var(1) = 1
trigger1 = !(enemynear(var(34)),animtime <= -(4 + (P2BodyDist X - (68 + (1-2*(enemynear(var(34)),facing=facing))*EnemyNear(var(34)),Vel X*4))/7.5) && enemynear(var(34)),animtime >= -12)
trigger2 = PlayerIDExist(helper(60000),Var(3)) && PlayerID(helper(60000),Var(3)),hitdefattr = SCA
trigger3 = PlayerIDExist(helper(60000),Var(5)) && PlayerID(helper(60000),Var(5)),hitdefattr = SCA
trigger4 = PlayerIDExist(helper(60000),Var(7)) && PlayerID(helper(60000),Var(7)),hitdefattr = SCA
trigger5 = PlayerIDExist(helper(60000),Var(9)) && PlayerID(helper(60000),Var(9)),hitdefattr = SCA
trigger6 = PlayerIDExist(helper(60000),Var(11))&&PlayerID(helper(60000),Var(11)),hitdefattr = SCA
trigger7 = PlayerIDExist(helper(60000),Var(13))&&PlayerID(helper(60000),Var(13)),hitdefattr = SCA
trigger8 = PlayerIDExist(helper(60000),Var(15))&&PlayerID(helper(60000),Var(15)),hitdefattr = SCA
trigger9 = PlayerIDExist(helper(60000),Var(17))&&PlayerID(helper(60000),Var(17)),hitdefattr = SCA
trigger10 = PlayerIDExist(helper(60000),Var(19))&&PlayerID(helper(60000),Var(19)),hitdefattr = SCA
trigger11 = PlayerIDExist(helper(60000),Var(21))&&PlayerID(helper(60000),Var(21)),hitdefattr = SCA
trigger12 = PlayerIDExist(helper(60000),Var(23))&&PlayerID(helper(60000),Var(23)),hitdefattr = SCA
trigger13 = PlayerIDExist(helper(60000),Var(25))&&PlayerID(helper(60000),Var(25)),hitdefattr = SCA
trigger14 = PlayerIDExist(helper(60000),Var(27))&&PlayerID(helper(60000),Var(27)),hitdefattr = SCA
trigger15 = PlayerIDExist(helper(60000),Var(29))&&PlayerID(helper(60000),Var(29)),hitdefattr = SCA
trigger16 = PlayerIDExist(helper(60000),Var(31))&&PlayerID(helper(60000),Var(31)),hitdefattr = SCA
trigger17 = enemynear(var(34)),movetype = A 
trigger17 = (enemy(0),alive && enemy(1),alive && numenemy = 2) || enemynear(var(34)),animtime >= -4
trigger18 = InGuardDist || (helper(40000),inguarddist)
trigger18 = enemynear(var(34)),hitdefattr = SCA,AA || enemynear(var(34)),hitdefattr = SCA,AP || var(1) = 1 || enemy,numproj > 0
value = 101

;---------------------------------------------------------------------------
; ダッシュ終了
[Statedef 101]
type    = S
physics = N
anim = 101+ var(1)*3000
sprpriority = 1
ctrl = 0

[State 100, 1]
type = PlaySnd
trigger1 = Time = 0
value = 101,0

[state a]
type = ChangeState
triggerall = time = 0
trigger1 = palno = 12
value = 0 
ctrl = 1

[state a]
type = velmul
trigger1 = 1
x = 0.9

[State 50, 1]
type = VarSet
trigger1 = Time = 0
v = 55
value = 1

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
trigger2 = var(1) = 1
trigger2 = Facing = 1
trigger2 = pos X > enemynear(var(34)),pos X
trigger3 = var(1) = 1
trigger3 = Facing = -1
trigger3 = pos X < enemynear(var(34)),pos X
value = 0
ctrl = 1

;---------------------[エフェクト]


[state a]
type = afterimagetime
trigger1 = animtime = 0
time = 0

;---------------------------------------------------------------------------
; バックダッシュ
[Statedef 105]
type    = S
physics = N
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 1]
type = statetypeset
trigger1 = animelem = 2
value = A

[State 105, 1]
type = VelSet
trigger1 = animelem = 3
x = -6
y = -6

[state a]
type = veladd
trigger1 = animelem = 3,>=0
y = 0.65

;---------------------[効果音]
[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 105, 0


[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; バックダッシュ・着地
[Statedef 106]
type    = S
physics = S
ctrl = 1
anim = 106

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

;---------------------[効果音]
[State 200, 1];
type = PlaySnd
trigger1 = time = 0
value = 106, 0

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; バックダッシュ・覚醒
[Statedef 3105]
type    = S
physics = N
anim = 3105
sprpriority = 1
velset = -12,0
ctrl = 0

[State 105, 1]
type = statetypeset
trigger1 = animelem = 2
value = A

[State 105, 1]
type = VelSet
trigger1 = animelem = 3
x = -6
y = -6

[state a]
type = veladd
trigger1 = animelem = 3,>=0
y = 0.65

;---------------------[効果音]
[State 200, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 105, 0

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3106

;---------------------------------------------------------------------------
; バックダッシュ・着地・覚醒
[Statedef 3106]
type    = S
physics = S
ctrl = 1
anim = 3106

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

;---------------------[効果音]
[State 200, 1];
type = PlaySnd
trigger1 = time = 0
value = 104, 0

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
; CNS レベル: 基本
[Statedef 170]
type = S
ctrl = 0
anim = 170+ var(1)*3000
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------[エフェクト]


;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
; CNS レベル: 基本
[Statedef 180]
type = S

[State 01]
type = ChangeState
trigger1 = MatchOver = 1
value = 182+ var(1)*3000

[State 01]
type = ChangeState
trigger1 = 1
value = 181+ var(1)*3000

;---------------------------------------------------------------------------
; 勝利１・ノーマル 共通
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 191, Snd 1];ふう・・・
type = PlaySnd
trigger1 = animelem = 4
value = 181,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; 勝利２・ノーマル 力
[Statedef 182]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 191, Snd 1];これでよかったのか・・・
type = PlaySnd
trigger1 = animelem = 4
value = 182,0

[State explod];エフェクト
type = Explod
trigger1 = AnimElemTime(7) = 20
trigger1 = numExplod(3182) = 0
trigger1 = frontedgebodydist >= backedgebodydist
anim = 3182
id = 3812
facing = ifelse((facing = 1),1,-1)
sprpriority = 5
postype = p1
pos = 80,0
bindtime = -1
supermove = 0
ignorehitpause = 0
removetime = -1
under = 0

[State explod];エフェクト
type = Explod
trigger1 = AnimElemTime(7) = 20
trigger1 = numExplod(3182) = 0
trigger1 = frontedgebodydist < backedgebodydist
anim = 3182
id = 3182
facing = ifelse((facing = 1),1,-1)
sprpriority = 5
postype = p1
pos = -80,0
bindtime = -1
supermove = 0
ignorehitpause = 0
removetime = -1
under = 0

[State 191, Snd 1];楓
type = PlaySnd
trigger1 = AnimElemTime(7) = 45
value = 53,0




[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------[エフェクト]


;---------------------------------------------------------------------------
; 勝利２・ノーマル 技・極
[Statedef 185]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 191, Snd 1];これでよかったのか・・・
type = PlaySnd
trigger1 = animelem = 4
value = 182,0

[State explod];エフェクト
type = Explod
trigger1 = AnimElemTime(7) = 20
trigger1 = NumExplod(3182) = 0
trigger1 = frontedgebodydist >= backedgebodydist
anim = 3182
id = 3182
sprpriority = 5
postype = p1
pos = 80,0
bindtime = -1
supermove = 0
ignorehitpause = 0
removetime = -1
under = 0

[State explod];エフェクト
type = Explod
trigger1 = AnimElemTime(7) = 20
trigger1 = NumExplod(3182) = 0
trigger1 = frontedgebodydist < backedgebodydist
anim = 3182
id = 3182
sprpriority = 5
postype = p1
pos = -80,0
bindtime = -1
supermove = 0
ignorehitpause = 0
removetime = -1
under = 0

[State 191, Snd 1];楓
type = PlaySnd
trigger1 = AnimElemTime(7) = 45
value = 53,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; 勝利１・覚醒
[Statedef 3181]
type = S
ctrl = 0
anim = 3180
velset = 0,0

[State 191, Snd 1];もう終わりかよ
type = PlaySnd
trigger1 = animelem = 3
value = 3181,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1




;---------------------------------------------------------------------------
; 勝利２・覚醒
[Statedef 3182]
type = S
ctrl = 0
anim = 3181
velset = 0,0

[State 182, 2]
type = AssertSpecial
trigger1 = time = [0,230]
flag = RoundNotOver

[State 191, Snd 1];俺を起こした
type = PlaySnd
trigger1 = time = 0
value = 3182,0

[State 191, Snd 1];手前を呪いな
type = PlaySnd
trigger1 = time = 70
value = 3182,1

[State 191, Snd 1];楓
type = PlaySnd
trigger1 = time = 150
value = 53,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State explod];エフェクト
type = Explod
trigger1 = time = 150
trigger1 = NumExplod(3182) = 0
trigger1 = frontedgebodydist >= backedgebodydist
anim = 3182
id = 3182
facing = ifelse((facing = 1),1,-1)
sprpriority = 5
postype = p1
pos = 80,0
bindtime = -1
supermove = 0
ignorehitpause = 0
removetime = -1
under = 0

[State explod];エフェクト
type = Explod
trigger1 = AnimElemTime(47) = 20
trigger1 = NumExplod(3182) = 0
trigger1 = frontedgebodydist < backedgebodydist
anim = 3182
id = 3182
facing = ifelse((facing = 1),1,-1)
sprpriority = 5
postype = p1
pos = -80,0
bindtime = -1
supermove = 0
ignorehitpause = 0
removetime = -1
under = 0

;---------------------[エフェクト]


;---------------------------------------------------------------------------
; 登場・ノーマル
[Statedef 190]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 191, 3] ;覚醒
type = ChangeState
trigger1 = var(1) = 1
value = 3190

;---------------------[ヘルパー]
[state a];剣質選択
type = Helper
trigger1 = var(1) = 0
trigger1 = time = 1
id = 10000
name = "select"
sprpriority = 4
pos = 0,-120
postype = p1
stateno = 10000
helpertype = normal
pausemovetime = 0
keyctrl = 1 
ownpal = 1

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Snd 1];邪悪なる者に・・・
type = PlaySnd
trigger1 = animelem = 2
value = 190,0

[State 191, Snd 1];未来は無い！
type = PlaySnd
trigger1 = animelem =6
value = 190,1

;---------------------[エフェクト]





[State 191, 3] ;Change to stand state when done
type = Changestate
trigger1 = AnimTime = 0
value = 0


;---------------------------------------------------------------------------
; 登場・覚醒
[Statedef 3190]
type = S
ctrl = 0
anim = 3190
velset = 0,0

;---------------------[ヘルパー]
[state a];剣質選択
type = Helper
trigger1 = time = 1
id = 10000
name = "select"
sprpriority = 4
pos = 0,-120
postype = p1
stateno = 10000
helpertype = normal
pausemovetime = 0
keyctrl = 1 
ownpal = 1


[state a]
type = varset
trigger1 = 1
v = 1
value = 1


[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Snd 1];はあああ
type = PlaySnd
trigger1 = time = 5
value = 3190,0
channel = 0

[State 191, Snd 1];はあああ
type = PlaySnd
trigger1 = time = 1
value = 2101,0

;---------------------[エフェクト]


[State 191, 3] ;Change to stand state when done
type = Changestate
trigger1 = AnimTime = 0
value = 0


;[][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][]
;----------------------------------------------------------------------------
;(HELPER)剣質選択用ヘルパー
[Statedef 10000]
type = A
ctrl = 0
anim = 10001+random%2
velset = 0,0
movetype = I
physics = N
sprpriority = 5

[state a]
type = turn
trigger1 = facing != 1

;---------------------[]
[State explod];エフェクト
type = Explod
trigger1 = time = 0
anim = 10000
id = 10000
sprpriority = 5
postype = p1
pos = 0,0
bindtime = -1
supermove = 0
ignorehitpause = 0
removetime = -1
under = 0

;---------------------[変数指定]
[state a];力
type = parentvarset
trigger1 = anim = 10001
v = 2
value = 0

[state a];技
type = parentvarset
trigger1 = anim = 10002
v = 2
value = 1



[state a];
type = varadd
triggerall = anim = 10002
triggerall = var(1) < 6
trigger1 = root,var(31) = 0
trigger1 = command = "U"
trigger2 = root,var(31) = 3
v = 1
value = 1


[state a];
type = varadd
triggerall = anim = 10001
triggerall = var(1) >= 6
triggerall = var(1) < 9
trigger1 = root,var(31) = 0
trigger1 = command = "D"
trigger2 = root,var(31) = 3
v = 1
value = 1

[state a];
type = varadd
triggerall = anim = 10002
triggerall = var(1) >= 9
trigger1 = root,var(31) = 0
trigger1 = command = "U"
trigger2 = root,var(31) = 3
trigger2 = var(1) < 12
trigger3 = root,var(31) = 3
trigger3 = var(1) = 12
trigger3 = root,time = 200 / (((TeamMode=Turns)*4)+1)
v = 1
value = 1



;---------------------[アニメーション]
[state a]
type = changeanim
triggerall = anim = 10001
triggerall = animelem = 2,>=0
trigger1 = root,var(31) = 0
trigger1 = command = "F" || command = "B"
trigger2 = root,var(31) = 2
trigger2 = root,time = 30 / (((TeamMode=Turns)*4)+1)
trigger3 = animelem = 2,>=10
trigger3 = root,palno != 12
trigger3 = root,var(31) = 0
trigger3 = Random <= 30
value = 10002

[state a]
type = changeanim
triggerall = anim = 10002
triggerall = animelem = 2,>=0
trigger1 = root,var(31) = 0
trigger1 = command = "F" || command = "B"
trigger2 = root,var(31) = 1 || root,palno = 12
trigger2 = root,time = 30 / (((TeamMode=Turns)*4)+1)
trigger3 = animelem = 2,>=10
trigger3 = root,var(31) = 0
trigger3 = Random <= 30
trigger4 = root,palno = 12
value = 10001

[state a]
type = changeanim
trigger1 = var(1) >= 13
value = 10003

;---------------------[効果音]
[State 191, Snd 1]
type = PlaySnd
;trigger1 = animelem = 2,>=0
trigger1 = root,var(30) = 0
trigger1 = root,var(31) = 0
trigger1 = command = "F" || command = "B"
trigger2 = root,var(31) = 2
trigger2 = anim = 10001
trigger2 = root,time = (30/(((TeamMode=Turns)*4)+1))-1
trigger2 = root,stateno = 190
trigger3 = root,var(31) = 1
trigger3 = anim = 10002
trigger3 = root,time = (30/(((TeamMode=Turns)*4)+1))-1
trigger3 = root,stateno = 190
trigger4 = root,var(31) = 0
trigger4 = var(5) = -1 || var(6) = -1
value = 10000,0

[State 191, Snd 1]
type = PlaySnd
trigger1 = anim = 10003
value = 10000,0
persistent = 0

[state a];
type = varset
triggerall = anim = 10001 
trigger1 = 1
v = 5
value = 1

[state a];
type = varset
triggerall = anim = 10002
trigger1 = animelem = 2,=0
trigger1 = var(5) = 1
v = 5
value = -1
[state a];
type = varset
triggerall = anim = 10002
trigger1 = animelem = 2,>0
trigger1 = var(5) != 0
v = 5
value = 0

[state a];
type = varset
triggerall = anim = 10002 
trigger1 = 1
v = 6
value = 1

[state a];
type = varset
triggerall = anim = 10001
trigger1 = animelem = 2,=0
trigger1 = var(6) = 1
v = 6
value = -1
[state a];
type = varset
triggerall = anim = 10001
trigger1 = animelem = 2,>0
trigger1 = var(6) != 0
v = 6
value = 0



;---------------------[]
[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[state a]
type = changestate
trigger1 = root,var(30) = 0
trigger1 = command = "start"
trigger2 = time >= 300
trigger3 = root,var(31) = 1
trigger3 = root,var(2) = 0
trigger3 = root,time >= 100 || EnemyNear,StateNo = 0
trigger4 = root,var(31) = 2
trigger4 = root,var(2) = 1
trigger4 = root,time >= 100 || EnemyNear,StateNo = 0
trigger5 = root,var(31) = 3
trigger5 = root,var(2) = 2
trigger5 = root,time >= 215 || EnemyNear,StateNo = 0
trigger6 = root,var(30) != 0
trigger6 = root,var(31) = 0
value = 10001

;----------------------------------------------------------------------------
;(HELPER)剣質選択用ヘルパー
[Statedef 10001]
type = A
ctrl = 0
anim = anim + 10
velset = 0,0
movetype = I
physics = N
sprpriority = 1

;---------------------[効果音]
[State 191, Snd 1]
type = PlaySnd
trigger1 = time = 0
value = 10000,1

;---------------------[エフェクト]
[State removeexplod];
type = removeexplod
trigger1 = animtime = 0
ID = 10000

;---------------------[]
[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[state a]
type = destroyself
trigger1 = animtime = 0

;----------------------------------------------------------------------------
;[][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][]






;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 199]
type = S
ctrl = 0
anim = 199 + var(1)*3000
velset = 0,0
movetype = I
physics = S
sprpriority = 1

[State 191, Snd 1];ふぅ・・・
type = PlaySnd
trigger1 = var(1) = 0
trigger1 = animelem = 1
value = 181,0

[State 191, Snd 1];落ち着け！
type = PlaySnd
trigger1 = var(1) = 0
trigger1 = animelem = 11
value = 199,0

[State 191, Snd 1];ざまあねえなあ
type = PlaySnd
trigger1 = var(1) = 1
trigger1 = animelem = 4
value = 3199,0

;---------------------[エフェクト]

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 立ち弱斬り
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 200
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]

[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0


[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 4
attr = S, NA
damage = ifelse(var(2) = 0,40,32), ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,32),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 32,0
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
guard.pausetime = ifelse(var(2) = 0,0,5), 5
sparkno = s4008
sparkxy = -15, -36
hitsound = s202, 0
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4.1
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 12

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 200, random%2
channel = 0

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 200, 7]
type = Changestate
value = 300
trigger1 = moveguarded
ignorehitpause = 1


[State 200, 7];連殺斬
type = ChangeState
trigger1 = var(30) = 0
trigger1 = var(2) != 0
trigger1 = movecontact
trigger1 = command = "x"
value = 280

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 連殺斬
[Statedef 280]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 280
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0


[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 5
attr = S, NA
damage = ifelse(var(2) = 0,40,32), ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,32),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 32,0
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 5, 5
guard.pausetime = 5, 5
sparkno = s4008
sparkxy = -15, -36
hitsound = s202, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -4.1
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 12

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%2
channel = 0

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 203, 0


;---------------------[移動]
[state a]
type = posadd
trigger1 = animelem = 2
x = 16

[state a]
type = posadd
trigger1 = animelem = 8
x = -16

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = moveguarded
trigger1 = var(2) = 0
ignorehitpause = 1
value = 300

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; ガード弾き
[Statedef 300]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 300 + var(1)*3000
poweradd = 0
sprpriority = 1

;---------------------[アニメーション]
[state a]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 210
trigger2 = prevstateno = 270
value = 301

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = prevstateno = 220
value = 302


[state a]
type = changeanim
trigger1 = time = 0
trigger1 = prevstateno = 400
value = 310

[state a]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 410
trigger2 = prevstateno = 450
value = 311

[state a]
type = statetypeset
trigger1 = anim = 310
trigger1 = anim = 311
value = C

[state a]
type = posadd
trigger1 = time = 0
trigger1 = anim = 311
x = -24



[state a]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 3210
value = 3300

[state a]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 3220
trigger2 = prevstateno = 3410
value = 3301

;---------------------[エフェクト]



;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = statetype != C
value = 0
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = statetype = C
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; ガード弾き
[Statedef 301]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 300 + var(1)*3000
poweradd = 0
sprpriority = 1

;---------------------[アニメーション]
[state a]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 210
trigger2 = prevstateno = 270
value = 301

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = prevstateno = 220
value = 302


[state a]
type = changeanim
trigger1 = time = 0
trigger1 = prevstateno = 400
value = 310

[state a]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 410
trigger2 = prevstateno = 450
value = 311

[state a]
type = statetypeset
trigger1 = anim = 310
trigger1 = anim = 311
value = C

[state a]
type = posadd
trigger1 = time = 0
trigger1 = anim = 311
x = -24



[state a]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 3210
value = 3300

[state a]
type = changeanim
triggerall = time = 0
trigger1 = prevstateno = 3220
trigger2 = prevstateno = 3410
value = 3301

;---------------------[エフェクト]



;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = statetype != C
value = 0
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = statetype = C
value = 11
ctrl = 1



;---------------------------------------------------------------------------
; 立ち弱パンチ
; CNS difficulty: easy
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 205
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = ifelse(var(2) = 0,40,32), ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,32),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 32,0
animtype = Light
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 6, 6
sparkno = s4000
sparkxy = -12, -58
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -3.8
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 8
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 206, 0

;---------------------[]
[State 200, 7]
type = Changestate
value = 300
trigger1 = moveguarded
trigger1 = var(2) = 0
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 立ち中斬り
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 210
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -125
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 7
persistent = 0


[State 200, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
damage = ifelse(var(2) = 0,118,63),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,157,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,62,16),0)
givepower = 32,0
animtype = mid
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 13, 13
guard.pausetime = ifelse(var(2) = 0,0,13), 13
sparkno = s4004
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -8.5
air.type = High
air.velocity = -2.4,-6
yaccel = 0.43
air.hittime = 12
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 4
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = moveguarded
trigger1 = var(2) = 0
ignorehitpause = 1
value = 300

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 立ち強斬り
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 220
poweradd = 0
sprpriority = 1

[State 200, 0]
type = PlayerPush
trigger1 = time = [1,50]
value = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -150
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 8
persistent = 0

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = var(2) != 0
value = 222

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
damage = ifelse(var(2) = 0,196,90),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,187,63),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 32,0
animtype = hard
guardflag = M
hitflag = MAF
priority = 6, Hit
pausetime = 16, 16
guard.pausetime = ifelse(var(2) = 0,0,16), 16
sparkno = s4004
sparkxy = -22, -46
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -8.6
air.type = High
air.velocity = -2.4,-6
yaccel = 0.43
air.hittime = 12
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 4
value = 210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1



;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = moveguarded
trigger1 = var(2) = 0
ignorehitpause = 1
value = 301

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 立ち蹴り
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 230
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,97,32),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 32,0
animtype = Light
guardflag = L
hitflag = MAFLD
priority = 3, Hit
pausetime = 8, 8
sparkno = s4000
sparkxy = -21, -28
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -3.7
air.type = high
air.velocity = -2.4,7
yaccel = 0.43
air.hittime = 8
air.fall = 0
fall.recover = 0
down.velocity = 0,0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 4
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 4
value = 230, 0


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 突き飛ばし攻撃
[Statedef 235]
type = S
movetype = A
physics = S
anim = 235
poweradd = 0
velset = 0
ctrl = 0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -150
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 8
persistent = 0


;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 206, 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = S, NA
damage = ifelse(var(2) = 0,75,63),ifelse(var(2) = 0,8,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,97,32),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = mid
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 12, 12
guard.pausetime = 14, 14
sparkno = s4000
sparkxy = -21, -56
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -5.5,-5
air.type = High
air.velocity = -5.4,-5
yaccel = 0.43
air.hittime = 12
fall = 1
fall.recover = 0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 222, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;----------------------------------------------------------------------------
;[][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][]

;---------------------------------------------------------------------------
; 打ち上げ斬り
[Statedef 260]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 260
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -125
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 7
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = S, NA
damage = ifelse(var(2) = 0,75,63),ifelse(var(2) = 0,8,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 32,0
animtype = up
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 9, 9
guard.pausetime = 0, 0
sparkno = s4005
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -1.1,-13
air.type = High
air.velocity = -1.1,-13
yaccel = 0.67
air.hittime = 12
fall = 1
fall.recover = 0

[State 200, 1]
type = HitDef
trigger1 = moveguarded = 1
trigger1 = enemy,statetype != C
persistent = 0
attr = S, NA
damage = 0, ifelse(var(2) = 1,0,8)
getpower = 0,ifelse(var(53) = 0,ifelse(var(2) = 0,1,16),0)
givepower = 0,0
animtype = up
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 8, 8
guard.pausetime = 12, 12
sparkno = s4005
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -1.1,-13
guard.velocity = -5.1
air.type = High
air.velocity = -1.1,-13
yaccel = 0.67
air.hittime = 12
fall = 1
fall.recover = 0
id = 260
nochainid = 260

[State 200, 1]
type = HitDef
trigger1 = moveguarded = 1
trigger1 = enemy,statetype = C
persistent = 0
attr = S, NA
damage = ifelse(var(2) = 1,75,86), 0
getpower = ifelse(var(53) = 0,47,0),0
givepower = 32,0
animtype = up
guardflag = S
hitflag = MAF
priority = 5, Hit
pausetime = 8, 8
guard.pausetime = 0, 0
sparkno = s4005
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = -1
guardsound = -1, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -1.1,-13
air.type = High
air.velocity = -1.1,-13
yaccel = 0.67
air.hittime = 12
fall = 0
fall.recover = 0
id = 260
nochainid = 260
p2stateno = 265


;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1




;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;(ENEMY)よろけ
[Statedef 265]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[state a]
type = turn
trigger1 = facing = enemy,facing
trigger1 = time = 0

[state a]
type = velset
trigger1 = animelem = 9
x = -1

[state a]
type = velmul
trigger1 = animelem = 13,>=0
x = 0.94

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 265

[State 820, 1]
type = ChangeAnim
triggerall = time = 0
trigger1 = name = "Shinnosuke Kagami" && authorname = "Ahuron"
trigger2 = name = "Mukuro" && authorname = "Ahuron"
trigger3 = name = "Ponta" && authorname = "Ahuron"
value = 266

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = 1
edge = 0,0

[state a]
type = selfstate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; しゃがみ弱斬り
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 400
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 32,0
animtype = Light
guardflag = L
hitflag = MAF
priority = 3, Hit
pausetime = 6, 6
guard.pausetime = ifelse(var(2) = 0,0,6), 6
sparkno = s4000
sparkxy = -12, -32
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -3.8
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 12

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 206, 0

[State 200, 7]
type = Changestate
value = 300
trigger1 = moveguarded
ignorehitpause = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; しゃがみ中斬り
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 410
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -125
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 7
persistent = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = C, NA
damage = ifelse(var(2) = 0,110,90),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,63),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,32),0)
givepower = 32,0
animtype = hard
guardflag = L
hitflag = MAF
priority = 4, Hit
pausetime = 10, 10
guard.pausetime = ifelse(var(2) = 0,0,16), 16
sparkno = s4005
sparkxy = -18, -26
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -8.3
air.type = High
air.velocity = -2.4,-6
yaccel = 0.43
air.hittime = 12
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 4
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = moveguarded
trigger1 = var(2) = 0
ignorehitpause = 1
value = 300

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; しゃがみ蹴り
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 420
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 32,0
animtype = Light
guardflag = L
hitflag = MAF
priority = 4, Hit
pausetime = 8, 8
sparkno = s4000
sparkxy = -12, -18
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3.8
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 8
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 230, 0


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; 足払い
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 430
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -125
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
damage = ifelse(var(2) = 0,94,75),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 32,0
animtype = hard
guardflag = L
hitflag = MAF
priority = 5, Hit
pausetime = 13, 13
sparkno = s4000
sparkxy = -12, -18
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = trip
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = 0,-3
air.type = High
air.velocity = 0,-3
guard.velocity = -4.4
yaccel = 0.43
air.hittime = 8
fall = 1
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 230, 0


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; 追い討ち
[Statedef 440]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 440
poweradd = 0
sprpriority = 1


[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 4
attr = S, NA
damage = ifelse(var(2) = 0,71,ifelse(var(2) = 1,71,86)),0
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,32,16),0),0
givepower = 0,0
animtype = mid
guardflag = N
hitflag = FLD
priority = 6, Hit
pausetime = 13, 13
guard.pausetime = 13, 13
sparkno = s7002
sparkxy = -17, -6
hitsound = s211, random%1
guard.sparkno = s7020
guardsound = s120, random%2
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = 0
air.type = High
air.velocity = 0,0
yaccel = 0.43
air.hittime = 12
fall = 1
fall.recover = 0
down.velocity = 0,0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 210, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 203, 0



;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;空中弱斬り
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = ifelse(var(53) = 0,8,0)
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 2

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 32,0
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 3
sparkno = s4008
sparkxy = -15, -56
hitsound = s202, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -4.4
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 12

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 203, 0


;---------------------------------------------------------------------------
;空中強斬り
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = ifelse(var(53) = 0,8,0)
poweradd= 0
ctrl = 0
anim = 620
sprpriority = 2

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -125
persistent = 0
ignorehitpause = 1

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1



;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = prevstateno = 920
trigger1 = AnimElem >= 3
attr = A, NP
damage = ifelse(var(2) = 0,118,63),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 32,0
animtype = hard
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = 10, 10
sparkno = s4004
sparkxy = -7, -56
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -4.5
air.type = High
air.velocity = -2.4,-6
yaccel = 0.43
air.hittime = 12
air.fall = 0
fall.recover = 0

[State 200, 1]
type = HitDef
trigger1 = prevstateno != 920
trigger1 = AnimElem >= 3
attr = A, NA
damage = ifelse(var(2) = 0,118,63),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 32,0
animtype = hard
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = 10, 10
sparkno = s4004
sparkxy = -7, -56
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -4.5
air.type = High
air.velocity = -2.4,-6
yaccel = 0.43
air.hittime = 12
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 203, 0


;---------------------------------------------------------------------------
;空中蹴り
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = ifelse(var(53) = 0,8,0)
poweradd= 0
ctrl = 0
anim = 610
sprpriority = 2

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = A, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 32,0
animtype = mid
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 5, 5
sparkno = s4000
sparkxy = -12, -38
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -4.2
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 8
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 230, 0



;---------------------------------------------------------------------------
; 立ち弱斬り・覚醒
[Statedef 3200]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3200
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = Light
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 6, 6
guard.pausetime = ifelse(var(2) = 0,0,6), 6
sparkno = s4008
sparkxy = -17, -50
hitsound = s202, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2.1
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 12



;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 4
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1


;---------------------[]
[State 200, 7]
type = Changestate
trigger1 = var(2) = 0
value = 300
trigger1 = moveguarded
ignorehitpause = 1


[State 200, 7];連殺斬
type = ChangeState
trigger1 = var(30) = 0
trigger1 = var(2) = 1
trigger1 = animelem = 10,>=0
trigger1 = movecontact
trigger1 = command = "x"
value = 3202

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 連殺斬・覚醒
[Statedef 3202]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3280
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 5
attr = S, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = Light
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 6, 6
guard.pausetime = 6, 6
sparkno = s4008
sparkxy = -17, -50
hitsound = s202, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2.1
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 12



;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 220, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 4
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 立ち弱パンチ・覚醒
[Statedef 3205]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3205
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = Light
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 6, 6
sparkno = s4000
sparkxy = -12, -88
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -3.8
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 8
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 206, 0


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 立ち中斬り・覚醒
[Statedef 3210]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3210
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -125
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 7
persistent = 0


[State 200, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
damage = ifelse(var(2) = 0,118,63),ifelse(var(2) = 0,8,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,157,63),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 0,0
animtype = mid
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 12, 12
guard.pausetime = ifelse(var(2) = 0,0,12), 12
sparkno = s4004
sparkxy = -19, -90
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -6.5
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -2.4,-6
yaccel = 0.43
air.hittime = 12
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 3210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = moveguarded
ignorehitpause = 1
value = 300

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 立ち強斬り・覚醒
[Statedef 3220]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3220
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -150
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 8
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = S, NA
damage = ifelse(var(2) = 0,196,90),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,187,63),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 0,0
animtype = hard
guardflag = H
hitflag = MAF
priority = 7, Hit
pausetime = 18, 18
guard.pausetime = 0, 18
sparkno = s4004
sparkxy = -22, -46
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -8.6
air.type = High
air.velocity = -2.4,-6
yaccel = 0.43
air.hittime = 12
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 4
value = 3210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 4
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = moveguarded
ignorehitpause = 1
value = 301

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 立ちC・覚醒
[Statedef 3230]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3230
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = C, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,32),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = mid
guardflag = L
hitflag = MAFLD
priority = 5, Hit
pausetime = 8, 8
guard.pausetime = 8, 8
sparkno = s4000
sparkxy = -7, -30
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2.5
air.type = High
air.velocity = -2.4,-6
yaccel = 0.43
air.hittime = 12
air.fall = 0
fall.recover = 0
down.velocity = 0,0


;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 230, 0


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 突き飛ばし攻撃・覚醒
[Statedef 3235]
type    = S
movetype= A
physics = S
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3235
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -150
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 8
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = S, NA
damage = ifelse(var(2) = 0,75,63),ifelse(var(2) = 0,8,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = mid
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = 14, 14
guard.pausetime = 14, 14
sparkno = s4000
sparkxy = -21, -56
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -5.5,-5
air.type = High
air.velocity = -5.4,-5
yaccel = 0.43
air.hittime = 12
fall = 1
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 4
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 5
value = 230, 0

;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 打ち上げ斬り・覚醒
[Statedef 3260]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 3260
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -125
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 8
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = S, NA
damage = ifelse(var(2) = 0,75,63),ifelse(var(2) = 0,8,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = up
guardflag = M
hitflag = MAF
priority = 6, Hit
pausetime = 10, 10
guard.pausetime = 0, 0
sparkno = s4005
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -1.1,-13
air.type = High
air.velocity = -1.1,-13
yaccel = 0.67
air.hittime = 12
fall = 1
fall.recover = 0

[State 200, 1]
type = HitDef
trigger1 = moveguarded
trigger1 = enemy,statetype != C
attr = S, NA
damage = 0, 8
getpower = 0,ifelse(var(53) = 0,157,0)
givepower = 0,0
animtype = up
guardflag = M
hitflag = MAF
priority = 6, Hit
pausetime = 8, 8
guard.pausetime = 12, 12
sparkno = s4005
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -1.1,-13
guard.velocity = -5.1
air.type = High
air.velocity = -1.1,-13
yaccel = 0.67
air.hittime = 12
fall = 1
fall.recover = 0
id = 260
nochainid = 260

[State 200, 1]
type = HitDef
trigger1 = moveguarded
trigger1 = enemy,statetype = C
attr = S, NA
damage = 90, 0
getpower = ifelse(var(53) = 0,157,0),0
givepower = 0,0
animtype = up
guardflag = N
hitflag = MAF
priority = 6, Hit
pausetime = 8, 8
guard.pausetime = 0, 0
sparkno = s4005
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = -1
guardsound = -1, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -1.1,-13
air.type = High
air.velocity = -1.1,-13
yaccel = 0.67
air.hittime = 12
fall = 0
fall.recover = 0
id = 260
nochainid = 260
p2stateno = 265


;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 4
value = 3210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 5
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; しゃがみ弱斬り・覚醒
[Statedef 3400]
type    = C
movetype= A
physics = C
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3400
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = C, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = Light
guardflag = L
hitflag = MAF
priority = 4, Hit
pausetime = 6, 6
guard.pausetime = 6, 6
sparkno = s4000
sparkxy = -17, -34
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = low
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -3.8
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 12

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 206, 0


[State 210, Width];押し戻し判定
type = Width
trigger1 = animelem = 3
player = 30,0

[State 210, Width];押し戻し判定
type = Width
trigger1 = animelem = 4,>= 0
trigger1 = animelem = 8,< 0
player = 50,0

;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; しゃがみ強斬り・覚醒
[Statedef 3410]
type    = C
movetype= A
physics = C
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3410
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -125
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 7
persistent = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = C, NA
damage = ifelse(var(2) = 0,110,90),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,63),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,32),0)
givepower = 0,0
animtype = hard
guardflag = L
hitflag = MAF
priority = 5, Hit
pausetime = 12, 12
guard.pausetime = ifelse(var(2) = 0,0,12), 12
sparkno = s4005
sparkxy = -17, -34
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 23
ground.hittime  = 23
ground.velocity = -8.3
air.type = High
air.velocity = -2.4,-6
yaccel = 0.43
air.hittime = 12
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 3210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 4
value = 203, 0


[State 210, Width];押し戻し判定
type = Width
trigger1 = animelem = 3
player = 30,0

[State 210, Width];押し戻し判定
type = Width
trigger1 = animelem = 4,>= 0
trigger1 = animelem = 8,< 0
player = 50,0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = moveguarded
ignorehitpause = 1
value = 300

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; しゃがみ蹴り・覚醒
[Statedef 3420]
type    = C
movetype= A
physics = C
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3420
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = C, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = Light
guardflag = L
hitflag = MAF
priority = 4, Hit
pausetime = 8, 8
sparkno = s4000
sparkxy = -12, -18
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3.8
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 8
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 230, 0


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; 足払い・覚醒
[Statedef 3430]
type    = C
movetype= A
physics = C
juggle  = ifelse(var(53) = 0,8,0)
velset = 0,0
ctrl = 0
anim = 3430
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -125
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 6
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 4
attr = C, NA
damage = ifelse(var(2) = 0,94,75),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 0,0
animtype = hard
guardflag = L
hitflag = MAF
priority = 5, Hit
pausetime = 13, 13
sparkno = s4000
sparkxy = -12, -18
hitsound = s207, random%3
guard.sparkno = s7021
guardsound = s121, 0
ground.type = trip
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = 0,-3
air.type = High
air.velocity = 0,-3
guard.velocity = -4.4
yaccel = 0.43
air.hittime = 8
fall = 1
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200,  random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 230, 0


;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
; 追い討ち・覚醒
[Statedef 3440]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 3440
poweradd = 0
sprpriority = 1


[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 4
attr = S, NA
damage = ifelse(var(2) = 0,71,ifelse(var(2) = 1,71,86)),0
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,32,16),0),0
givepower = 0,0
animtype = mid
guardflag = N
hitflag = FLD
priority = 6, Hit
pausetime = 14, 14
guard.pausetime = 14, 14
sparkno = s7002
sparkxy = -17, -6
hitsound = s211, random%1
guard.sparkno = s7020
guardsound = s120, random%2
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = 0
air.type = High
air.velocity = 0,0
yaccel = 0.43
air.hittime = 12
fall = 1
fall.recover = 0
down.velocity = 0,0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 3210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 203, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1



;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;空中弱斬り・覚醒
[Statedef 3600]
type    = A
movetype= A
physics = A
juggle  = ifelse(var(53) = 0,8,0)
poweradd= 0
ctrl = 0
anim = 3600
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = A, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = Light
guardflag = HA
hitflag = MAF
priority = 3, Hit
pausetime = 3, 3
sparkno = s4008
sparkxy = -15, -56
hitsound = s202, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -4.4
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 12

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 203, 0


;---------------------------------------------------------------------------
;空中強斬り・覚醒
[Statedef 3610]
type    = A
movetype= A
physics = A
juggle  = ifelse(var(53) = 0,8,0)
poweradd= 0
ctrl = 0
anim = 3610
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -125
persistent = 0
ignorehitpause = 1

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = A, NA
damage = ifelse(var(2) = 0,118,63),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 0,0
animtype = hard
guardflag = HA
hitflag = MAF
priority = 5, Hit
pausetime = 10, 10
sparkno = s4004
sparkxy = -7, -56
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -4.5
air.type = High
air.velocity = -2.4,-6
yaccel = 0.43
air.hittime = 12
air.fall = 0
fall.recover = 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 3210, random%1

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 203, 0

;---------------------------------------------------------------------------
;空中蹴り・覚醒
[Statedef 3620]
type    = A
movetype= A
physics = A
juggle  = ifelse(var(53) = 0,8,0)
poweradd= 0
ctrl = 0
anim = 3620
sprpriority = 2

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 3
attr = A, NA
damage = ifelse(var(2) = 0,51,43),ifelse(var(2) = 0,4,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 32,0
animtype = mid
guardflag = HA
hitflag = MAF
priority = 4, Hit
pausetime = 5, 5
sparkno = s4000
sparkxy = -12, -38
hitsound = s207, random%3
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -4.2
air.type = High
air.velocity = -2.4,-5
yaccel = 0.43
air.hittime = 8
air.fall = 0
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%2

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 230, 0


;---------------------------------------------------------------------------
; 弾き・構え
[Statedef 900]
type    = S
movetype= A
physics = N
juggle  = 0
;velset = 0,0
ctrl = 0
anim = 900
poweradd = 0
sprpriority = 1

;---------------------[アニメーション変更]
[state a];しゃがみ・ノーマル
type = changeanim
triggerall = var(1) = 0
trigger1 = time = 0
trigger1 = statetype = C
value = 910


[state a];地上・覚醒
type = changeanim
triggerall = var(1) = 1
trigger1 = time = 0
trigger1 = statetype != A
value = 3900


;---------------------[当身判定]
[State 1700, 0];
type = ReversalDef
trigger1 = time = 0
attr = S, ST
reversal.attr = SCA, NA,SA, HA
hitflag = MAF
priority = 6, hit
pausetime = 0,0
sparkno = s-1
hitsound = -1,0
;p2facing = 1
p1stateno = 901

[State 1700, 0];
type = ReversalDef
trigger1 = time = 6
attr = S, ST
reversal.attr = SCA, NA
hitflag = MAF
priority = 6, hit
pausetime = 0,0
sparkno = s-1
hitsound = -1,0
;p2facing = 1
p1stateno = 901

;---------------------[効果音]

;---------------------[残像]
[State 50, 4];残像
type = AfterImage
trigger1 = time = 0
time = -1
trans = none
timegap = 2
framegap = 2
length = 5
ignorehitpause = 1
palbright = 3,3,64
;palcontrast = 225,225,225
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 1,1,1

;---------------------[移動]
[state a]
type = velset
trigger1 = statetype != A
x = 0
y = 0

[state a]
type = gravity
trigger1 = statetype = A

;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = statetype = S
value = 0
ctrl = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = statetype = C
value = 11
ctrl = 1




;---------------------------------------------------------------------------
; 弾き・攻撃・通常版
[Statedef 901]
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 901 + var(1)* 3000
poweradd = 0
sprpriority = 1

;---------------------[ガードキャンセル]
[state a]
type = statetypeset
trigger1 = pos Y >= 0
trigger1 = prevstateno = [140,159]
value = S

[state a]
type = statetypeset
trigger1 = pos Y < 0
trigger1 = prevstateno = [140,159]
value = A

[state a]
type = poweradd
trigger1 = prevstateno = [140,159]
trigger1 = time = 0
value = -1000

;---------------------[アニメーション変更]

[state a];立ち・覚醒
type = changeanim
triggerall = var(1) = 1
trigger1 = time = 0
value = 3901


[state a]
type = hitadd
trigger1 = movehit = 1
value = -1


;---------------------[判定]
[State 800, 1]
type = HitDef
trigger1 = (prevstateno = [140,159]) || enemynear(var(34)),statetype = A
Trigger1 = time = 0
attr = S, NA
damage = 0
getpower = 0,0
givepower = 0,0
animtype = up
hitflag = MAF
priority = 7, Hit
guard.pausetime = 0, 0
sparkno = s7008
sparkxy = -26, -82
hitsound = S120,0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -1.1,-9
air.type = High
air.velocity = -1.1,-8
air.hittime = 12
fall = 1
fall.recover = 0
persistent = 0

[State 800, 1]
type = HitDef
trigger1 = prevstateno != [140,159]
trigger1 = !(enemynear(var(34)),statetype = A)
Trigger1 = time = 0
attr = S, ST
hitflag = MAF
priority = 7, hit
sparkno = s7008
sparkxy = -26, -82
p2facing = 1
p2stateno = 902
hitsound = S120,random%2
persistent = 0

[State 800, 1]
type = null;HitDef
trigger1 = prevstateno = [120,159]
attr = S, ST
hitflag = MAF
priority = 7, hit
sparkno = s7008
sparkxy = -26, -82
fall = 1
fall.recover = 0
velset = 0,-1
p2facing = 1
p2stateno = 902
hitsound = S120,random%2
persistent = 0

;---------------------[残像]
[state a]
type = afterimagetime
trigger1 = time = 0
time = 0




[State 3040, 7];画面フラッシュ
type = EnvColor
trigger1 = movehit = 1
trigger2 = movehit = 9
;persistent = 0
ignorehitpause = 1
time = 2
value = 0,0,255
under = 1

[State 3040, 7];画面フラッシュ
type = EnvColor
trigger1 = movehit = 5
trigger2 = movehit = 12
;persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 1


;---------------------[]
[state a]
type = ctrlset
trigger1 = anim = 901 && animelemtime(6) = 6
trigger2 = anim = 911 && animelemtime(4) = 6
trigger3 = anim = 3902 && animelem = 4
trigger4 = anim = 3910 && animelem = 5
trigger5 = anim = 921 && animelem = 8
trigger6 = anim = 3922 && animelem = 10
value = 1

;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = statetype != A
value = 0
ctrl = 1

[State 00]
type = ChangeState
triggerall = statetype = A
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
;(ENEMY)弾かれ
[Statedef 902]
type    = U
movetype= H
physics = N
velset = 0,0
sprpriority = -1

[state a]
type = turn
trigger1 = facing = enemy,facing
trigger1 = time = 0

;---------------------[アニメーション]
[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
trigger1 = statetype = S
value = 933

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
trigger1 = statetype = C
value = 943

[State 820, 1]
type = Changestate
Trigger1 = Time = 0
trigger1 = statetype = A
value = 1703


[State 820, 1]
type = ChangeAnim
triggerall = var(1) = 0
triggerall = time = 0
triggerall = statetype = S
trigger1 = name = "Shinnosuke Kagami" && authorname = "Ahuron"
trigger2 = name = "Mukuro" && authorname = "Ahuron"
trigger3 = name = "Ponta" && authorname = "Ahuron"
value = 902

[State 820, 1]
type = ChangeAnim
triggerall = var(1) = 0
triggerall = time = 0
triggerall = statetype = C
trigger1 = name = "Shinnosuke Kagami" && authorname = "Ahuron"
trigger2 = name = "Mukuro" && authorname = "Ahuron"
trigger3 = name = "Ponta" && authorname = "Ahuron"
value = 912


[State 820, 1]
type = ChangeAnim
triggerall = var(1) = 1
triggerall = time = 0
triggerall = statetype != A
trigger1 = name = "Shinnosuke Kagami" && authorname = "Ahuron"
trigger2 = name = "Mukuro" && authorname = "Ahuron"
trigger3 = name = "Ponta" && authorname = "Ahuron"
value = 3905

;---------------------[移動]
[state a]
type = posadd
trigger1 = statetype != A
trigger1 = time = 0
x = -8

[state a]
type = posadd
trigger1 = statetype != A
trigger1 = animelem = 2
x = -16



[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = 1
edge = 0,0

;---------------------[]
[state a]
type = selfstate
trigger1 = animtime = 0
trigger1 = statetype = S
value = 0
ctrl = 1

[state a]
type = selfstate
trigger1 = animtime = 0
trigger1 = statetype = C
value = 11
ctrl = 1



;---------------------------------------------------------------------------
; 弾き・追加攻撃・通常
[Statedef 930]
type    = S
movetype= A
physics = N
juggle  = 8
velset = 12,0
ctrl = 0
anim = 930
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 5
persistent = 0


[State 200, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
damage = ifelse(var(2) = 0,110,ifelse(var(2) = 1,90,106)), ifelse(var(2) = 0,110,ifelse(var(2) = 1,90,106))
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,63),0),ifelse(var(53) = 0,ifelse(var(2) = 0,125,63),0)
givepower = 0,0
animtype = mid
guardflag = N
hitflag = MAF
priority = 7, Hit
pausetime = 14, 14
guard.pausetime = 14, 14
sparkno = s7002
sparkxy = -17, -76
hitsound = s210, random%4
guard.sparkno = s7020
guardsound = s120, random%2
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -5.5,-5
air.type = High
air.velocity = -5.4,-5
yaccel = 0.43
air.hittime = 12
fall = 1
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 2
value = 200, random%4

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 201, 0

;---------------------[エフェクト]


;---------------------[移動]
[state a]
type = velmul
trigger1 = 1
x = 0.8

[state a]
type = posadd
trigger1 = animelem = 2
x = 8

[state a]
type = posadd
trigger1 = animelem = 3
x = 16

[state a]
type = posadd
trigger1 = animelem = 10
x = -24



;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 弾き・追加攻撃・覚醒
[Statedef 3930]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 3930
poweradd = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = VelSet
trigger1 = var(53) > 0
trigger1 = time = 0
x = 5
persistent = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem = 6
attr = S, NA
damage = 106, 106
getpower = ifelse(var(53) = 0,157,0),ifelse(var(53) = 0,157,0)
givepower = 0,0
animtype = up
guardflag = N
hitflag = MAF
priority = 7, Hit
pausetime = 14, 14
guard.pausetime = 14, 14
sparkno = s7005
sparkxy = -17, -76
hitsound = s220, random%3
guard.sparkno = -1
guardsound = -1, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -1.1,-13
air.type = High
air.velocity = -1.1,-13
yaccel = 0.67
air.hittime = 12
fall = 1
fall.recover = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 4
value = 200, random%3

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 5
value = 200, 0

;---------------------[エフェクト]


;---------------------[移動]
[state a]
type = posadd
trigger1 = time = 0
trigger2 = animelem = 2
x = 4

[state a]
type = posadd
trigger1 = animelem = 3
trigger2 = animelem = 7
x = 8

[state a]
type = posadd
trigger1 = animelem = 4
trigger2 = animelem = 5
x = 12

[state a]
type = posadd
trigger1 = animelem = 6
x = 16

[state a]
type = posadd
trigger1 = animelem = 12
x = -12

[state a]
type = posadd
trigger1 = animelem = 13
trigger2 = animtime = 0
x = -16

[state a]
type = posadd
trigger1 = animelem = 14
x = -20

;---------------------[]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; 空中復帰
[Statedef 700]
type    = A
movetype= I
physics = N
anim = 701 + var(1)*3000
velset = -0.5,-8
ctrl = 0

[State 170, 1]
type = NotHitBy
trigger1 = time = 1
value = SCA
time = 1

;---------------------[エフェクト]




[State 5210, 1]
type = PalFX
trigger1 = Time = 0
time = 12
add = 200,200,200;98,68,178
mul = 110,109,209
color = 0

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = time = 0
value = 200, random%4


[State 5210, 2]
type = gravity
trigger1 = 1
x = -1

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 2
value = 1

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1


;---------------------------------------------------------------------------
; ダウン回避
[Statedef 710]
type    = A
movetype= I
physics = N
ctrl = 0
velset = -4,-3.6
anim = 700
sprpriority = 1

[State 170, 1]
type = NotHitBy
trigger1 = time = 1
value = SCA
time = 1

[State 5210, 1]
type = PalFX
trigger1 = 1
time = 1
add = 200,200,200;98,68,178
mul = 110,109,209
color = 1

[State 105, 1]
type = Veladd
trigger1 = 1
y = 0.47

[State explod];
type = Explod
trigger1 = time = 0
anim = 7040
id = 7040
sprpriority = 3
postype = p1
pos = 0,-40
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 190,200
ignorehitpause = 0
ownpal = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ダウン回避・着地
[Statedef 711]
type    = S
physics = N
ctrl = 0
anim = 711
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = time = 1
value = SCA
time = 1

[State 106, 1]
type = posSet
trigger1 = Time = 0
y = 0

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = time = 0
value = 47, 0

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
; 移動起き上がり
[Statedef 720]
type    = U
movetype= I
physics = N
ctrl = 0
velset = 0,0

[State 106, 1]
type = posSet
trigger1 = Time = 0
y = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
 
;---------------------[アニメーション]
[state a]
type = changeanim
trigger1 = var(30) = 0
trigger1 = var(1) = 0
trigger1 = time = 0
trigger1 = command = "holdfwd"
value = 700

[state a]
type = changeanim
triggerall = var(30) != 0
triggerall = var(1) = 0
triggerall = time = 0
triggerall = (facing = 1 && Helper(30000),ParentDist X >= 70) || (facing = -1 && Helper(30010),ParentDist X >= 70)
trigger1 = facing = 1
trigger1 = (pos X < enemy(0),pos X && pos X < enemy(1),pos X)
trigger2 = facing = -1
trigger2 = (pos X > enemy(0),pos X && pos X > enemy(1),pos X)
trigger3 = !(facing = -1 && pos X < enemy(0),pos X && pos X < enemy(1),pos X)
trigger3 = !(facing = 1 && pos X > enemy(0),pos X && pos X > enemy(1),pos X)
value = 721

[state a]
type = changeanim
triggerall = var(30) != 0
triggerall = time = 0
triggerall = var(1) = 0
triggerall = frontedgebodydist >= 80
trigger1 = facing = -1
trigger1 = (pos X < enemy(0),pos X && pos X < enemy(1),pos X)
trigger2 = facing = 1
trigger2 = (pos X > enemy(0),pos X && pos X > enemy(1),pos X)
trigger3 = pos X <= ((enemy(0),pos X) + 70) && pos X >= ((enemy(0),pos X) - 70)
trigger3 = pos X <= ((enemy(1),pos X) + 70) && pos X >= ((enemy(1),pos X) - 70)
value = 720

[state a]
type = changeanim
trigger1 = var(30) = 0
trigger1 = var(1) = 0
trigger1 = time = 0
trigger1 = command = "holdback"
value = 721

;---------------------[移動]
[state a]
type = velset
triggerall = time = 0
trigger1 = var(30) = 0
trigger1 = command = "holdfwd"
trigger2 = var(30) != 0
trigger2 = var(1) = 0
trigger2 = anim = 720
x = 16

[state a]
type = velset
triggerall = var(30) != 0
triggerall = var(1) = 1
triggerall = time = 0
triggerall = (facing = 1 && Helper(30000),ParentDist X >= 70) || (facing = -1 && Helper(30010),ParentDist X >= 70)
trigger1 = facing = 1
trigger1 = (pos X < enemy(0),pos X && pos X < enemy(1),pos X)
trigger2 = facing = -1
trigger2 = (pos X > enemy(0),pos X && pos X > enemy(1),pos X)
trigger3 = !(facing = -1 && pos X < enemy(0),pos X && pos X < enemy(1),pos X)
trigger3 = !(facing = 1 && pos X > enemy(0),pos X && pos X > enemy(1),pos X)
x = -16

[state a]
type = velset
triggerall = var(30) != 0
triggerall = time = 0
triggerall = var(1) = 1
triggerall = frontedgebodydist >= 60
trigger1 = facing = -1
trigger1 = (pos X < enemy(0),pos X && pos X < enemy(1),pos X)
trigger2 = facing = 1
trigger2 = (pos X > enemy(0),pos X && pos X > enemy(1),pos X)
x = 16

[state a]
type = velset
triggerall = time = 0
trigger1 = var(30) = 0
trigger1 = command = "holdback"
trigger2 = var(30) != 0
trigger2 = var(1) = 0
trigger2 = anim = 721
x = -16

[state a]
type = velmul
trigger1 = 1
x = 0.9

[State 0, 1]
type = Turn
triggerall = roundstate = 2
triggerall = (Facing = 1 && pos X > enemynear(var(34)),pos X) || (Facing = -1 && pos X < enemynear(var(34)),pos X)
triggerall = AnimTime = 0 
trigger1 = var(30) = 0
trigger2 = var(30) != 0
IgnoreHitPause = 1

;---------------------[]

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 720, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value = SCA
time = 3

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;投げ
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;通常投げ
[Statedef 980]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 980

[State 900, 3]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,50,25),0),ifelse(var(53) = 0,ifelse(var(2) = 0,50,25),0)
givepower = 0,0
hitflag = M-
numhits = 0
priority = 7, miss
sparkno = -1
sprpriority = -1
p2facing = 1
ground.hittime = 30
p1stateno = ifelse(command = "holdback",981,983)
p2stateno = 913

[State 900, 5]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;雷霆
[Statedef 981]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 981

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1
value = 0,70

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 1
value = 5

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 207,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 210,2

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 2
pos = 30,-80
time = 9

[State 911, 4]
type = targetbind
trigger1 = Animelem = 1
pos =  50,0
time = 1

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 5
pos = -10,-80
time = 9

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 7
pos = -25,-37
time = 9

[State 905, 11]
type = Turn
trigger1 = AnimElem = 1
value = 0

[State 950, 1]
type = Veladd
trigger1 = time >= 21
y = .6

[State 950, 1]
type = VelSet
trigger1 = animelem = 6
x = -4
y = -5.5

[State 905, 13]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 982
;---------------------------------------------------------------------------
;雷霆
[Statedef 982]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 982
 
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 127,0

[State 1101, 1]
type = velset
trigger1 = AnimElem = 2
x = 4

[State 1101, 1]
type = velset
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 3
x = 3

[State 1101, 1]
type = posset
trigger1 = time = 0
y = 0

[State 905, 1]
type = PlayerPush
trigger1 = Time >= 0
trigger1 = Time <= 40
value = 0

[State 2010, 6]
type = EnvShake
trigger1 = AnimElem = 1
time = 15
ignorehitpause = 1
  
[State 905, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = -100

[State 905, 11]
type = Turn
trigger1 = AnimElem = 2
value = 0

[State 105, 2]
type = Turn
trigger1 =  (animtime = 0)
trigger1 = p2dist X < 0

[State 1105, 3]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;通常投げ・覚醒
[Statedef 3980]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 3980

[State 900, 3]
type = HitDef
Trigger1 = Time = 0
attr = S, NT
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,50,25),0),ifelse(var(53) = 0,ifelse(var(2) = 0,50,25),0)
givepower = 0,0
hitflag = M-
numhits = 0
priority = 7, miss
sparkno = -1
sprpriority = -1
p2facing = 1
ground.hittime = 30
p1stateno = ifelse(command = "holdback",3981,3983)
p2stateno = 913

[State 900, 5]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;雷霆
[Statedef 3981]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3981

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1
value = 0,70

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 1
value = 5

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 207,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 71,0

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 2
pos = 30,-80
time = 9

[State 911, 4]
type = targetbind
trigger1 = Animelem = 1
pos =  50,0
time = 1

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 5
pos = -10,-80
time = 9

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 7
pos = -25,-37
time = 9

[State 905, 11]
type = Turn
trigger1 = AnimElem = 1
value = 0

[State 950, 1]
type = Veladd
trigger1 = time >= 21
y = .6

[State 950, 1]
type = VelSet
trigger1 = animelem = 6
x = -4
y = -5.5

[State 905, 13]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3982
;---------------------------------------------------------------------------
;雷霆
[Statedef 3982]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 3982
 
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 127,0

[State 1101, 1]
type = velset
trigger1 = AnimElem = 2
x = 4

[State 1101, 1]
type = velset
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 3
x = 3

[State 1101, 1]
type = posset
trigger1 = time = 0
y = 0

[State 905, 1]
type = PlayerPush
trigger1 = Time >= 0
trigger1 = Time <= 40
value = 0

[State 2010, 6]
type = EnvShake
trigger1 = AnimElem = 1
time = 15
ignorehitpause = 1
  
[State 905, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = -100

[State 905, 11]
type = Turn
trigger1 = AnimElem = 2
value = 0

[State 105, 2]
type = Turn
trigger1 =  (animtime = 0)
trigger1 = p2dist X < 0

[State 1105, 3]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------
;雷霆(p2やられ)
[Statedef 913]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 5050, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 903

[State 905, 11]
type = Turn
trigger1 = time = 1
value = 0


[State 2020, 2.2]
type = sprpriority
trigger1 = time >= 0
trigger1 = time <= 18
value = 2

[State 950, 1]
type = Veladd
trigger1 = time >= 21
y = .6

[State 950, 1]
type = VelSet
trigger1 = animelem = 6
x = -4
y = -5

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -30
value = 914

;---------------------------------------------------------------------------
;雷霆
[Statedef 983]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 981

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1
value = 0,70

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 1
value = 5

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 207,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 210,2

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 2
pos = 30,-80
time = 9

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 5
pos = -10,-80
time = 9

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 7
pos = -25,-37
time = 9

[State 950, 1]
type = Veladd
trigger1 = time >= 21
y = .6

[State 950, 1]
type = VelSet
trigger1 = animelem = 6
x = -4
y = -5.5

[State 905, 13]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 912
;---------------------------------------------------------------------------
;雷霆
[Statedef 3983]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3981

[State 1000, 2]
type = Width
trigger1 = AnimElem = 1
value = 0,70

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 1
value = 5

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 207,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 71,0

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 2
pos = 30,-80
time = 9

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 5
pos = -10,-80
time = 9

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 7
pos = -25,-37
time = 9

[State 950, 1]
type = Veladd
trigger1 = time >= 21
y = .6

[State 950, 1]
type = VelSet
trigger1 = animelem = 6
x = -4
y = -5.5

[State 905, 13]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3982

;--------------------------------------------------------------------
;投げ着地
[Statedef 912]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 982
 
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 127,0

[State 1101, 1]
type = velset
trigger1 = AnimElem = 2
x = 4

[State 1101, 1]
type = velset
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 3, < 3
x = 3

[State 1101, 1]
type = posset
trigger1 = time = 0
y = 0

[State 905, 1]
type = PlayerPush
trigger1 = Time >= 0
trigger1 = Time <= 40
value = 0

[State 2010, 6]
type = EnvShake
trigger1 = AnimElem = 1
time = 15
ignorehitpause = 1
  
[State 905, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = -100

[State 905, 11]
type = Turn
trigger1 = AnimElem = 2
value = 0

[State 105, 2]
type = Turn
trigger1 = (var(20)!=0) && (animtime = 0)
trigger1 = p2dist X < 0

[State 1050, 4]
type = ChangeState
trigger1 = (var(20)!=0) && (animtime = 0)
value = var(20)
ctrl = 0

[State 1105, 3]
type = Changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げやられ
[Statedef 913]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 5050, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 903

[State 2020, 2.2]
type = sprpriority
trigger1 = time >= 0
trigger1 = time <= 18
value = 2

[State 950, 1]
type = Veladd
trigger1 = time >= 21
y = .6

[State 950, 1]
type = VelSet
trigger1 = animelem = 6
x = -4
y = -5

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -30
value = 914

;---------------------------------------------------------------------------
;投げやられ
[Statedef 914]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5050, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 904

[State 1000, 2]
type = turn
trigger1 = time = 0

[State 1270, 2]
type = posset
trigger1 = time = 0
y = 0

[State 1270, 2]
type = VelSet
trigger1 = time = 1
x = 0.5

[State 1270, 2]
type = VelSet
trigger1 = animelem = 2
x = 3
y = -4

[State 5050, 3]
type = VelAdd
trigger1 = Time >= 13
y = .5


[State 1281, 3]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
trigger1 = Time >= 20
value = 5100

;------------------------------------------------------
;空中投げ
[Statedef 920]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 920

[State 1000, 1]
type = VelAdd
trigger1 = time >= 0
y = .5

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 900,0

[State 900, 3]
type = HitDef
Trigger1 = Time = 0
trigger1 = p2bodydist X <= 24
attr = A, NT
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,50,25),0),ifelse(var(53) = 0,ifelse(var(2) = 0,50,25),0)
givepower = 0,0
hitflag = AF
numhits = 0
priority = 7, Hit
sparkno = -1
sprpriority = -1
p2facing = 1
ground.hittime = 30
p1stateno = 921
p2stateno = 923

[State 900, 5]
type = ChangeState
Trigger1 = animtime = 0
value = 610

;--------------------------------------------------------------------
;空中投げ発生
[Statedef 921]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 921

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 1
value = 5

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 207,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 210,2

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 1
pos = 30,-80
time = 9

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 4
pos = -10,-80
time = 9

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 6
pos = -25,-37
time = 9

[State 950, 1]
type = Veladd
trigger1 = time >= 10
y = .6

[State 950, 1]
type = Veladd
trigger1 = time >= 18
y = .3

[State 950, 1]
type = VelSet
trigger1 = animelem = 3
x = -3
y = -6

[State 905, 13]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 982

;------------------------------------------------------
;空中投げ・覚醒
[Statedef 3920]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 3920

[State 1000, 1]
type = VelAdd
trigger1 = time >= 0
y = .5

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 900,0

[State 900, 3]
type = HitDef
Trigger1 = Time = 0
trigger1 = p2bodydist X <= 24
attr = A, NT
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,50,25),0),ifelse(var(53) = 0,ifelse(var(2) = 0,50,25),0)
givepower = 0,0
hitflag = AF
numhits = 0
priority = 7, Hit
sparkno = -1
sprpriority = -1
p2facing = 1
ground.hittime = 30
p1stateno = 3921
p2stateno = 923

[State 900, 5]
type = ChangeState
Trigger1 = animtime = 0
value = 3610

;--------------------------------------------------------------------
;空中投げ発生
[Statedef 3921]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 3921

[state 1, 1]
type = sprpriority
trigger1 = Animelem = 1
value = 5

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 207,0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 71,0

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 1
pos = 30,-80
time = 9

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 4
pos = -10,-80
time = 9

[State 1101, 1]
type = targetbind
trigger1 = Animelem = 6
pos = -25,-37
time = 9

[State 950, 1]
type = Veladd
trigger1 = time >= 10
y = .6

[State 950, 1]
type = Veladd
trigger1 = time >= 18
y = .3

[State 950, 1]
type = VelSet
trigger1 = animelem = 3
x = -3
y = -6

[State 905, 13]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3982

;-------------------------------------------------------------
;空中投げやられ
[Statedef 923]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 5050, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 923

[State 2020, 2.2]
type = sprpriority
trigger1 = time >= 0
trigger1 = time <= 8
value = 2

[State 950, 1]
type = Veladd
trigger1 = time >= 10
y = .6

[State 950, 1]
type = Veladd
trigger1 = time >= 18
y = .3

[State 950, 1]
type = VelSet
trigger1 = animelem = 3
x = -3
y = -6

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -30
value = 914


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;必殺技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; 弱疾風
[Statedef 1000]
type    = S
movetype= A
physics = N
juggle  = ifelse(var(53) = 0,8,0)
poweradd= ifelse(var(53) = 0,ifelse(var(2) = 0,32,16),0)
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1000, 0
channel = 0

;---------------------[ヘルパー]
[state a];炎
type = Helper
trigger1 = animelem = 6
id = 1000
name = "honoo"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1010
helpertype = normal
pausemovetime = 0
ignorehitpause = 1
persistent = 0
keyctrl = 1 
ownpal = 1


;---------------------[ステートチェンジ]
[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 強疾風
[Statedef 1001]
type    = S
movetype= A
physics = N
juggle  = ifelse(var(53) = 0,4,0)
poweradd= ifelse(var(53) = 0,ifelse(var(2) = 0,32,16),0)
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
var(53) = -100
persistent = 0
ignorehitpause = 1


;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1000, 0
channel = 0

;---------------------[ヘルパー]
[state a];炎
type = Helper
trigger1 = animelem = 6
id = 1000
name = "honoo"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1010
helpertype = normal
pausemovetime = 0
ignorehitpause = 1
persistent = 0
keyctrl = 1 
ownpal = 1


;---------------------[ステートチェンジ]
[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;[][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][]
;----------------------------------------------------------------------------
;(HELPER)弾
[Statedef 1010]
type = S
ctrl = 0
anim = 1010
velset = 0,0
movetype = A
physics = N
sprpriority = 5

;---------------------[速度]
[state a]
type = velset
trigger1 = time = 0
trigger1 = root,stateno = 1000
x = 3

[state a]
type = velset
trigger1 = time = 0
trigger1 = root,stateno = 1001
x = 6

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = time = 0
value = 1001, 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, SP
damage = ifelse(var(2) = 0,96,64),ifelse(var(2) = 0,10,6)
getpower = ifelse(root,var(53) = 0,ifelse(root,var(2) = 0,125,47),0),ifelse(root,var(53) = 0,ifelse(root,var(2) = 0,63,16),0)
givepower = 0,0
animtype = hard
guardflag = MA
hitflag = MAF
priority = 7, Hit
pausetime = 0, 10
guard.pausetime = 0, 10
sparkno = s-1
sparkxy = -21, 0
hitsound = s1002, 0
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = -8.5
air.type = High
air.velocity = -2.5,-9
yaccel = 0.5
air.hittime = 12
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0


;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1


[State 200, 7]
type = changestate
trigger1 = movecontact
value = 1015
ignorehitpause = 1

[State 200, 7]
type = destroyself
trigger1 = frontedgedist <= -20

;----------------------------------------------------------------------------
;(HELPER)弾消滅
[Statedef 1015]
type = S
ctrl = 0
anim = 1011
velset = 0,0
movetype = A
physics = N
sprpriority = 5


[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1


;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 220,180

;---------------------[]
[State 200, 7]
type = destroyself
trigger1 = animtime = 0
;----------------------------------------------------------------------------

;[][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][]


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; 弱空牙
[Statedef 1100]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= ifelse(var(53) = 0,ifelse(var(2) = 0,32,16),0)
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1100, 0
channel = 0

;---------------------[移動]
[State 1000, 2]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
x = 10

[state a]
type = statetypeset
trigger1 = animelem = 8
value = A

[state a]
type = velset
trigger1 = animelem = 8
x = 1
y = -8

[state a]
type = veladd
trigger1 = animelem = 8,>0
y = 0.5

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 7
attr = S, SA
damage = ifelse(var(2) = 0,104,80),ifelse(var(2) = 0,10,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 0,0
animtype = hard
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = 8, 8
sparkno = s4005
sparkxy = -7, -56
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120,0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -2,-9
guard.velocity = -3
air.type = High
air.velocity = -2,-9
yaccel = 0.5
air.hittime = 12
fall = 1
fall.recover = 0

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1101, 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 00]
type = ChangeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1105

;---------------------------------------------------------------------------
; 空牙着地
[Statedef 1105]
type    = S
physics = N
;anim = anim+5
sprpriority = 1
ctrl = 0

[state a]
type = changeanim
trigger1 = time = 0
value = 1105

[state a]
type = changeanim
trigger1 = time = 0
trigger1 = anim != 1105
value = anim + 5

[state a]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[state a]
type = velmul
trigger1 = 1
x = 0.85

[State 191, Snd 1]
type = PlaySnd
trigger1 = time = 0
value = 106,0

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; 強空牙
[Statedef 1101]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= ifelse(var(53) = 0,ifelse(var(2) = 0,63,32),0)
velset = 0,0
anim = 1101
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1100, 0
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1101, 0


;---------------------[移動]
[State 1000, 2]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
x = 10

[state a]
type = statetypeset
trigger1 = animelem = 8
value = A

[state a]
type = velset
trigger1 = animelem = 8
x = 1.5
y = -9

[state a]
type = veladd
trigger1 = animelem = 8,>0
y = 0.5

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 6
attr = S, SA
damage = ifelse(var(2) = 0,72,64),ifelse(var(2) = 0,12,0)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,32),0)
givepower = 0,0
animtype = hard
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = 8, 8
sparkno = s4005
sparkxy = -7, -56
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -2.5,-10
guard.velocity = -3
air.type = High
air.velocity = -2.5,-10
yaccel = 0.5
air.hittime = 12
fall = 1
fall.recover = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 8
attr = A, SA
damage = ifelse(var(2) = 0,72,64),ifelse(var(2) = 0,4,4)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,94,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,47,16),0)
givepower = 0,0
animtype = hard
guardflag = MA
hitflag = MAF
priority = 6, Hit
pausetime = 12, 12
sparkno = s4005
sparkxy = -7, -82
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -2.5,-10
guard.velocity = -7
air.type = High
air.velocity = -2.5,-10
yaccel = 0.5
air.hittime = 12
fall = 1
fall.recover = 0

[State 1505, 9]
type = ChangeState
triggerall = var(30) = 0
triggerall = command = "強空牙"
triggerall = time = [0,22]
trigger1 = movecontact
trigger2 = NumTarget(1101) = 1
value = 1103

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1



;---------------------[]
[State 00]
type = ChangeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1105

;--------------------------------------------------------------------
;強空牙 追加入力
[Statedef 1103]
type = A
movetype = A
physics = N
anim = 1202
poweradd = ifelse(var(53) = 0,27,0)
velset = 0,0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
y = -6.8

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 2

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 1505, 6]
type = HitDef
trigger1 = AnimElem >= 2
attr = A, SA
animtype = Hard
damage = ifelse(var(2) = 0,100,84),9
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
sparkno = S4004
guard.sparkno = S4009
sparkxy = 10,-70
guardflag = M
hitflag = MAF
pausetime = 4,4
givepower = 0,0
hitsound = S211,random%1
guardsound = S120,0
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.3,-3
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = 0.60

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1202, 0
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1205, 0

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1215


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;弱　連刃斬一発目
[Statedef 1200]
type = S
movetype = A
physics = N
anim = 1200
poweradd = ifelse(var(53) = 0,40,0)
velset = 0
ctrl = 0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = velset
trigger1 = AnimElem = 3
x = 3

[State 210, 0]
type = veladd
trigger1 = AnimElem = 4
x = 1

[State 210, 0]
type = veladd
trigger1 = AnimElem = 8, >= 0
trigger1 = Vel X >= 0
x = -0.5

[State 210, 0]
type = velset
trigger1 = time >= 40
x = 0


[State 230, 3]
type = HitDef
trigger1 = AnimElem >= 5
attr = S, SA
animtype = Hard
damage = ifelse(var(2) = 0,50,36),3
guardflag = M
hitflag = MA
pausetime = 8,8
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
getpower  = 50,50
givepower = 0,0
sparkno = S4007
guard.sparkno = S4009
sparkxy = 10,-68
hitsound = S211,random%1
guardsound = S120,0
ground.type = Low
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
air.cornerpush.veloff = 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 1200, 0
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 1203, 0


[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弱　連刃斬二発目
[Statedef 1201]
type = S
movetype = A
physics = S
anim = 1201
poweradd = ifelse(var(53) = 0,27,0)
velset = 0
ctrl = 0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = velset
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 5, < 0
x = 4

[State 230, 3]
type = HitDef
trigger1 = AnimElem >= 3
attr = S, NA
damage = ifelse(var(2) = 0,55,44),8
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
givepower = 0,0
animtype = up
guardflag = M
hitflag = MA
priority = 5, Hit
pausetime = 8, 8
sparkno = s4005
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = 120, 0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -1.1,-13
air.type = High
air.velocity = -1.1,-13
yaccel = 0.67
air.hittime = 12
fall = 1
fall.recover = 0
ground.cornerpush.veloff = -15

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 1201, 0
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 1204, 0


[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弱　連刃斬三発目
[Statedef 1202]
type = A
movetype = A
physics = N
anim = 1202
poweradd = ifelse(var(53) = 0,27,0)
velset = 0,0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
y = -6.8

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 4

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 1505, 6]
type = HitDef
trigger1 = AnimElem >= 2
attr = A, SA
animtype = Hard
damage = ifelse(var(2) = 0,100,84),9
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
sparkno = S4004
guard.sparkno = S4009
sparkxy = 10,-70
guardflag = M
hitflag = MAF
pausetime = 8,8
givepower = 0,0
hitsound = S211,random%1
guardsound = S120,0
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.3,-3
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = 0.60

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1202, 0
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1205, 0

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1210

;---------------------------------------------------------------------------
;弱　連刃斬三発目（着地）
[Statedef 1210]
type = S
movetype = I
physics = S
anim = 1210
poweradd = 0
velset = 0,0
ctrl = 0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = time = 0
value = 106, 0


[State 410, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1505, 3]
type = VelSet
trigger1 = time = [0,10]
x = 1

[State 1000, 2]
type = Width
trigger1 = FrontEdgeDist <= 10
value = 2,0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強　連刃斬一発目
[Statedef 1203]
type = S
movetype = A
physics = N
anim = 1203
poweradd = ifelse(var(53) = 0,40,0)
velset = 0
ctrl = 0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = velset
trigger1 = AnimElem = 3
x = 6

[State 210, 0]
type = veladd
trigger1 = AnimElem = 4
x = 3

[State 210, 0]
type = veladd
trigger1 = AnimElem = 8, >= 0
trigger1 = Vel X >= 0
x = -0.5

[State 210, 0]
type = velset
trigger1 = time >= 40
x = 0

[State 230, 3]
type = HitDef
trigger1 = AnimElem >= 5
attr = S, SA
animtype = Hard
damage = ifelse(var(2) = 0,50,36),3
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
guardflag = M
hitflag = MA
pausetime = 8,8
givepower = 0,0
sparkno = S4007
guard.sparkno = S4009
sparkxy = 10,-68
hitsound = S211,random%2
guardsound = S120,0
ground.type = Low
ground.slidetime = 24
ground.hittime  = 24
ground.velocity = -9
guard.velocity = -4
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
air.cornerpush.veloff = 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 1200, 0
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 1203, 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強　連刃斬二発目
[Statedef 1204]
type = S
movetype = A
physics = S
anim = 1204
poweradd = ifelse(var(53) = 0,27,0)
velset = 0
ctrl = 0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = velset
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 5, < 0
x = 7

[State 230, 3]
type = HitDef
trigger1 = AnimElem >= 3
attr = S, NA
damage = ifelse(var(2) = 0,55,44),8
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
givepower = 0,0
animtype = up
guardflag = M
hitflag = MA
priority = 5, Hit
pausetime = 8, 8
sparkno = s4005
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = s4009
guardsound = s120, 0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -1.1,-13
air.type = High
air.velocity = -1.1,-13
yaccel = 0.67
air.hittime = 12
fall = 1
fall.recover = 0
ground.cornerpush.veloff = -15

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 1201, 0
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 1204, 0

random%2

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強　連刃斬三発目
[Statedef 1205]
type = A
movetype = A
physics = N
anim = 1205
poweradd = ifelse(var(53) = 0,27,0)
velset = 0,0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
y = -6.8

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 5

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 1505, 6]
type = HitDef
trigger1 = AnimElem >= 2
attr = A, SA
animtype = Hard
damage = ifelse(var(2) = 0,100,84),9
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
sparkno = S4004
guard.sparkno = S4009
sparkxy = 10,-70
guardflag = M
hitflag = MAF
pausetime = 4,4
givepower = 0,0
hitsound = S211,random%1
guardsound = S120,0
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -2.3,-3
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = 0.60

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1202, 0
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1205, 0


[State 1505, 9]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
value = 1215

;---------------------------------------------------------------------------
;強　連刃斬三発目（着地）
[Statedef 1215]
type = S
movetype = I
physics = S
anim = 1215
poweradd = 0
velset = 0,0
ctrl = 0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = time = 0
value = 106, 0


[State 410, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1505, 3]
type = VelSet
trigger1 = time = [0,10]
x = 2

[State 1000, 2]
type = Width
trigger1 = FrontEdgeDist <= 10
value = 2,0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; 嵐討
[Statedef 1300]
type    = S
movetype= A
physics = N
juggle  = ifelse(var(53) = 0,4,0)
poweradd= ifelse(var(53) = 0,32,0)
velset = 0,0
anim = 1300
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1


[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 200,random%2
channel = 0

[State 271, 0]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 1

[State 200, 3]
type = HitDef
trigger1 = AnimElem = 1
ID = 3000
attr = S, ST
hitflag = M-
getpower  = 50,50
givepower = 20,20
sparkno = -1
numhits = 0
pausetime = 0,0
ground.type = high
ground.hittime = 14
ground.slidetime = 14
fall = 1
p1stateno = 1301
p2stateno = 1302


[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;[][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][]
;一刀・嵐討（１Ｐ）
[Statedef 1301]
type = S
movetype = A
physics = S
anim = 1301
poweradd = 0
velset = 0,0
ctrl = 0



[State 200, 4]
type = velset
trigger1 = Time = [14,53]
x = 1.8

[State 3200, 1]
type = Width
trigger1 = 1
value = 50,0

[State 1105, 3]
type = TargetBind
trigger1 = time <= 52
Pos = 50,0

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 12
trigger3 = AnimElem = 19
trigger4 = AnimElem = 31
value = 200, random%2
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 207, random%2

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 19
trigger3 = AnimElem = 31
value = 202, random%2

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = AnimElem = 12
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

[State explod];血
type = Explod
trigger1 = AnimElem = 19
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

[State explod];血
type = Explod
trigger1 = AnimElem = 31
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1




[State 1105, 3]
type = HitAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 12
trigger3 = AnimElem = 19
trigger4 = AnimElem = 31
value = 1

[State 903, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = -15
kill = 0

[State 903, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 12
value = -10
kill = 0

[State 903, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 19
value = -10
kill = 0

[State 903, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 31
value = -15

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;一刀・嵐討（２Ｐ）
[Statedef 1302]
type = S
movetype = H
physics = S
ctrl = 0

[State 200, 4]
type = ChangeAnim2
trigger1 = Time = 0
value = 1702

[State 1105, 3]
type = BindToTarget
trigger1 = anim = 1702
Pos = 45
time = 1

[State 1105, 3]
type = SprPriority
trigger1 = time = 0
value = -5

[State 1105, 3]
type = posset
trigger1 = time = 0
y = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 1703
;---------------------------------------------------------------------------
;弱　連刃斬・覚醒一発目
[Statedef 1400]
type = S
movetype = A
physics = N
anim = 1400
poweradd = ifelse(var(53) = 0,40,0)
velset = 0
ctrl = 0

;---------------------[無敵]
[state a]
type = nothitby
trigger1 = palno = 12
trigger1 = time <= 6
value = SCA
time = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = velset
trigger1 = AnimElem = 3
x = 4

[State 210, 0]
type = veladd
trigger1 = AnimElem = 4
x = 4

[State 210, 0]
type = veladd
trigger1 = AnimElem = 8, >= 0
trigger1 = Vel X >= 0
x = -0.5

[State 210, 0]
type = velset
trigger1 = time >= 40
x = 0


[State 230, 3]
type = HitDef
trigger1 = AnimElem >= 5
attr = S, SA
animtype = Hard
damage = ifelse(var(2) = 0,50,36),3
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
guardflag = M
hitflag = MA
pausetime = 9,9
givepower = 0,0
sparkno = S4007
guard.sparkno = S4009
guardsound = S120,0
sparkxy = 10,-68
hitsound = S211,random%1
ground.type = Low
ground.slidetime = 24
ground.hittime  = 24
guard.hittime = 24
ground.velocity = -9
air.velocity = -2,-2
guard.velocity = -5
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -10
air.cornerpush.veloff = 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 1400, 0
channel = 0

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 1203, 0


[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弱　連刃斬・覚醒二発目
[Statedef 1401]
type = S
movetype = A
physics = S
anim = 1401
poweradd = ifelse(var(53) = 0,27,0)
velset = 0
ctrl = 0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = velset
trigger1 = AnimElem = 1, >= 0
trigger1 = AnimElem = 5, < 0
x = 4

[State 230, 3]
type = HitDef
trigger1 = AnimElem >= 3
attr = S, NA
damage = ifelse(var(2) = 0,55,44),8
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
givepower = 0,0
animtype = up
guardflag = M
hitflag = MA
priority = 5, Hit
pausetime = 8, 8
sparkno = s4005
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = S4009
guardsound = S120,0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -1.1,-13
air.type = High
air.velocity = -1.1,-13
yaccel = 0.67
air.hittime = 12
fall = 1
fall.recover = 0
ground.cornerpush.veloff = -10

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 1401, 0
channel = 0

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 1204, 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弱　連刃斬・覚醒三発目
[Statedef 1402]
type = A
movetype = A
physics = N
anim = 1402
poweradd = ifelse(var(53) = 0,27,0)
velset = 0,0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
y = -6.8

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 4

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 1505, 6]
type = HitDef
trigger1 = AnimElem >= 3
attr = A, SA
animtype = back
damage = ifelse(var(2) = 0,100,84),9
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
sparkno = S4007
guard.sparkno = S4009
sparkxy = 10,-70
guardflag = M
hitflag = MAF
pausetime = 8,8
givepower = 0,0
hitsound = S1208,0
guardsound = S120,0
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -8,1
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = 0.60

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 4
value = 1402, 0
channel = 0

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 2
value = 1204, 0

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1410

;---------------------------------------------------------------------------
;弱　連刃斬・覚醒三発目（着地）
[Statedef 1410]
type = S
movetype = I
physics = S
anim = 1410
poweradd = 0
velset = 0,0
ctrl = 0

[State 200, 1];着地
type = PlaySnd
trigger1 = time = 0
value = 106, 0

[State 410, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1505, 3]
type = VelSet
trigger1 = time = [0,10]
x = 1

[State 1000, 2]
type = Width
trigger1 = FrontEdgeDist <= 10
value = 2,0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強　連刃斬・覚醒一発目
[Statedef 1403]
type = S
movetype = A
physics = N
anim = 1403
poweradd =ifelse(var(53) = 0,40,0)
velset = 0
ctrl = 0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = velset
trigger1 = AnimElem = 3
x = 6

[State 210, 0]
type = veladd
trigger1 = AnimElem = 4
x = 3

[State 210, 0]
type = veladd
trigger1 = AnimElem = 8, >= 0
trigger1 = Vel X >= 0
x = -0.5

[State 210, 0]
type = velset
trigger1 = time >= 40
x = 0

[State 230, 3]
type = HitDef
trigger1 = AnimElem >= 5
attr = S, SA
animtype = Hard
damage = ifelse(var(2) = 0,60,44),6
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
guardflag = M
hitflag = MA
pausetime = 8,8
givepower = 0,0
sparkno = S4007
guard.sparkno = S4009
sparkxy = 10,-68
hitsound = S211,random%1
guardsound = S120,0
ground.type = Low
ground.slidetime = 24
ground.hittime  = 24
guard.hittime = 24
ground.velocity = -9
guard.velocity = -5
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -10
air.cornerpush.veloff = 0

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 1400, 0
channel = 0

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 1203, 0


[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強　連刃斬・覚醒二発目
[Statedef 1404]
type = S
movetype = A
physics = S
anim = 1404
poweradd = ifelse(var(53) = 0,27,0)
velset = 0
ctrl = 0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 210, 0]
type = velset
trigger1 = AnimElem = 2, >= 0
trigger1 = AnimElem = 5, < 0
x = 7

[State 230, 3]
type = HitDef
trigger1 = AnimElem >= 3
attr = S, NA
damage = ifelse(var(2) = 0,60,44),6
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
givepower = 0,0
animtype = up
guardflag = M
hitflag = MA
priority = 5, Hit
pausetime = 8, 8
sparkno = s4005
sparkxy = -17, -76
hitsound = s211, random%1
guard.sparkno = S4009
guardsound = S120,0
ground.type = high
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -1.1,-13
air.type = High
air.velocity = -1,-13
yaccel = 0.67
air.hittime = 12
fall = 1
fall.recover = 0
p2stateno = 1703
ground.cornerpush.veloff = -10

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 3
value = 1401, 0
channel = 0

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 1204, 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強　連刃斬・覚醒三発目
[Statedef 1405]
type = A
movetype = A
physics = N
anim = 1405
poweradd = ifelse(var(53) = 0,27,0)
velset = 0,0

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
y = -7.8

[State 1505, 3]
type = VelSet
trigger1 = AnimElem = 1
x = 5

[State 1505, 4]
type = VelAdd
trigger1 = Time >= 0
y = .5

[State 1505, 6]
type = HitDef
trigger1 = AnimElem >= 2
attr = A, SA
animtype = back
damage = ifelse(var(2) = 0,92,76),9
getpower = ifelse(var(53) = 0,50,0),ifelse(var(53) = 0,50,0)
sparkno = S4007
guard.sparkno = S4009
sparkxy = 10,-70
guardflag = M
hitflag = MAF
pausetime = 8,8
givepower = 0,0
hitsound = S1208,0
guardsound = S120,0
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -9
guard.velocity = -4
air.velocity = -8,1
ground.cornerpush.veloff = -9
guard.cornerpush.veloff = -4
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
yaccel = 0.60

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = movehit
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 200, 1];ボイス
type = PlaySnd
trigger1 = animelem = 4
value = 1402, 0
channel = 0

[State 200, 1];振り
type = PlaySnd
trigger1 = animelem = 3
value = 1205, 0

[State 1505, 9]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1415

;---------------------------------------------------------------------------
;強　連刃斬三発目（着地）
[Statedef 1415]
type = S
movetype = I
physics = S
anim = 1415
poweradd = 0
velset = 0,0
ctrl = 0

[State 200, 1];着地
type = PlaySnd
trigger1 = time = 0
value = 106, 0


[State 410, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1505, 3]
type = VelSet
trigger1 = time = [0,10]
x = 2

[State 1000, 2]
type = Width
trigger1 = FrontEdgeDist <= 10
value = 2,0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;弱疾風・覚醒
[Statedef 1500]
type    = S
movetype= A
physics = N
juggle  = ifelse(var(53) = 0,4,0)
poweradd= ifelse(var(53) = 0,32,0)
velset = 0,0
anim = 1500 + var(2)*2
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1500, 0
channel = 0



;---------------------[ヘルパー]
[state a];弾
type = Helper
trigger1 = animelem = 6
id = 1510
name = "honoo"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1510
helpertype = normal
pausemovetime = 0
ignorehitpause = 1
persistent = 0
keyctrl = 0
ownpal = 1

;---------------------[ステートチェンジ]
[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;[][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][]
;----------------------------------------------------------------------------
;(HELPER)疾風・覚醒・弾
[Statedef 1510]
type = S
ctrl = 0
anim = 1510
velset = 0,0
movetype = A
physics = N
sprpriority = 5

;---------------------[速度]
[state a]
type = velset
trigger1 = time = 0
x = 4


;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = 1
persistent = 0
attr = S, SP
damage = ifelse(root,var(2) = 0,136,96),ifelse(root,var(2) = 0,13,10)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,32),0)
givepower = 0,0
animtype = hard
guardflag = M
hitflag = MAF
priority = 7, Hit
pausetime = 6, 6
guard.pausetime = 0,0
sparkno = -1
sparkxy = -21, 0
hitsound = s1800, 0
guard.sparkno = -1
guardsound = s121, 0
ground.type = high
ground.slidetime = ifelse(root,var(2) = 0,29,24)
ground.hittime  = ifelse(root,var(2) = 0,29,24)
guard.slidetime = ifelse(root,var(2) = 0,29,21)
guard.hittime  = ifelse(root,var(2) = 0,29,21)
ground.velocity = -5
guard.velocity = -8.0
air.type = High
air.velocity = -2.5,-3
air.hittime = 12
air.fall = 1
fall.recover = 0
palfx.color = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 3121, 3]
type = Explod
trigger1 = movehit
trigger1 = NumExplod(4003) = 0
id = 4003
anim = 4003
pos = 0, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1
ignorehitpause = 1


[State 200, 1];振り
type = PlaySnd
trigger1 = time = 0
value = 1800, 0


;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[State 200, 7]
type = changestate
trigger1 = movecontact
value = 1016
ignorehitpause = 1

[State 200, 7]
type = destroyself
trigger1 = frontedgedist <= -40

;----------------------------------------------------------------------------
;----------------------------------------------------------------------------
;(HELPER)疾風・覚醒・弾
[Statedef 1511]
type = S
ctrl = 0
anim = 1510
velset = 0,0
movetype = A
physics = N
sprpriority = 5

;---------------------[速度]
[state a]
type = velset
trigger1 = time = 0
x = 7
;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = 1
persistent = 0
attr = S, SP
damage = ifelse(root,var(2) = 0,136,96),ifelse(root,var(2) = 0,13,10)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,32),0)
givepower = 0,0
animtype = hard
guardflag = M
hitflag = MAF
priority = 7, Hit
pausetime = 6, 6
guard.pausetime = 0,0
sparkno = -1
sparkxy = -21, 0
hitsound = s1800, 0
guard.sparkno = -1
guardsound = s121, 0
ground.type = high
ground.slidetime = ifelse(root,var(2) = 0,29,24)
ground.hittime  = ifelse(root,var(2) = 0,29,24)
guard.slidetime = ifelse(root,var(2) = 0,29,21)
guard.hittime  = ifelse(root,var(2) = 0,29,21)
ground.velocity = -5
guard.velocity = -8.0
air.type = High
air.velocity = -2.5,-3
air.hittime = 12
air.fall = 1
fall.recover = 0
palfx.color = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0

[State 3121, 3]
type = Explod
trigger1 = movehit
trigger1 = NumExplod(4003) = 0
id = 4003
anim = 4003
pos = 0, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1
ignorehitpause = 1


[State 200, 1];振り
type = PlaySnd
trigger1 = time = 0
value = 1800, 0


;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[State 200, 7]
type = changestate
trigger1 = movecontact
value = 1016
ignorehitpause = 1

[State 200, 7]
type = destroyself
trigger1 = frontedgedist <= -40

;----------------------------------------------------------------------------
;(HELPER)弾消滅
[Statedef 1016]
type = S
ctrl = 0
anim = 1011
velset = 0,0
movetype = A
physics = N
sprpriority = 5


[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = posadd
trigger1 = time = 0
x = 40

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 220,180

;---------------------[]
[State 200, 7]
type = destroyself
trigger1 = animtime = 0

;----------------------------------------------------------------------------
;(HELPER)痺れやられ
[Statedef 4003]
type = A
ctrl = 0
anim = 4003
velset = 0,0
movetype = I
physics = N
sprpriority = 5

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1
ignorehitpause = 1

;---------------------[透過]
;---------------------[]
[State 200, 7]
type = destroyself
trigger1 = animtime = 0


;----------------------------------------------------------------------------

;[][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][]


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; 強疾風・覚醒
[Statedef 1501]
type    = S
movetype= A
physics = N
juggle  = ifelse(var(53) = 0,4,0)
poweradd = ifelse(var(53) = 0,32,0)
velset = 0,0
anim = 1501
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1500, 0
channel = 0


;---------------------[ヘルパー]
[state a];弾
type = Helper
trigger1 = animelem = 5
id = 1511
name = "honoo"
sprpriority = 5
pos = 0,0
postype = p1
stateno = 1511
helpertype = normal
pausemovetime = 0
ignorehitpause = 1
persistent = 0
keyctrl = 0
ownpal = 1

;---------------------[ステートチェンジ]
[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; 弱空牙・覚醒
[Statedef 1600]
type    = S
movetype= A
physics = N
juggle  = ifelse(var(53) = 0,7,0)
poweradd=  ifelse(var(53) = 0,32,0)
velset = 0,0
anim = 1600
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1600, 0
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1101, 0

;---------------------[移動]
[State 1000, 2]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
x = 8

[state a]
type = statetypeset
trigger1 = animelem = 8
value = A

[state a]
type = velset
trigger1 = animelem = 8
x = 1
y = -6.5 + (var(2) = 1&& palno != 12)*0.5 + (palno = 12)*1

[state a]
type = veladd
trigger1 = animelem = 8,>0
y = 0.5

;---------------------[無敵]
[state a]
type = nothitby
trigget1 = palno != 12
trigger1 = time <= 12 
value = SCA
time = 1

[state a]
type = nothitby
trigget1 = palno = 12
trigger1 = 1
value = SCA
time = 1

[State 3121, 3]
type = Explod
trigger1 = movehit
trigger1 = NumExplod(4003) = 0
id = 4003
anim = 4003
pos = 0, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1
ignorehitpause = 1

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 6
attr = S, SP
damage = ifelse(var(2) = 0,100,56),ifelse(var(2) = 0,10,6)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 0,0
animtype = hard
guardflag = M
hitflag = MAF
priority = 6, Hit
pausetime = 6, 6
sparkno = -1
sparkxy = -7, -56
hitsound = s1800, 0
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -3,-7
guard.velocity = -4
air.type = High
air.velocity = -3,-7
yaccel = 0.5
air.hittime = 12
fall = 1
air.fall = 1
fall.recover = 0
palfx.time = 60
palfx.mul = 110,140,220
;palfx.sinadd = 63,65,68,18
;palfx.add = 220,130,114
palfx.add = 20,10,10
ground.cornerpush.veloff = -15

[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 7
trigger1 = var(2) = 1
attr = A, SP
damage = 32, 4
getpower = ifelse(var(53) = 0,47,0),ifelse(var(53) = 0,16,0)
getpower = 47,16
givepower = 0,0
animtype = hard
guardflag = M
hitflag = MAF
priority = 7, Hit
pausetime = 10, 10
sparkno = -1
sparkxy = -7, -82
hitsound = s1800, 0
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -2.5,-10
guard.velocity = -4
air.type = High
air.velocity = -2.5,-10
yaccel = 5.5
air.hittime = 12
fall = 1
fall.recover = 0
palfx.time = 60
palfx.mul = 110,140,220
;palfx.sinadd = 63,65,68,18
;palfx.add = 220,130,114
palfx.add = 20,10,10
ground.cornerpush.veloff = -5

;---------------------[ヘルパー]
[state a];雷
type = Helper
trigger1 = animelem = 6
id = 1602
name = "honoo"
sprpriority = 5
pos = 65,0
postype = p1
stateno = 1606
helpertype = normal
ignorehitpause = 1
persistent = 0
keyctrl = 0
ownpal = 1

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

;---------------------[]
[State 00]
type = ChangeState
triggerall = Vel Y > 0
triggerall = palno = 12
trigger1 = Pos Y >= 0
value = 0
ctrl = 1

[State 00]
type = ChangeState
triggerall = Vel Y > 0
triggerall = palno != 12
trigger1 = Pos Y >= 0
value = 1605
;-----------------------------------------------------------------------------
;空牙用雷・待機
[Statedef 1606]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = A
physics = N
sprpriority = 8

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = changestate
trigger1 = time >= 8
value = 1602
ignorehitpause = 1
;-----------------------------------------------------------------------------
;空牙用雷・待機
[Statedef 1607]
type = S
ctrl = 0
anim = 9999
velset = 0,0
movetype = A
physics = N
sprpriority = 8

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = changestate
trigger1 = time >= 8
value = 1608
ignorehitpause = 1
;----------------------------------------------------------------------------
;空牙用雷
[Statedef 1608]
type = S
ctrl = 0
anim = 1602
velset = 0,0
movetype = A
physics = N
sprpriority = 8



[State 3122, 3]
type = HitDef
trigger1 = 1
persistent = 0
attr = S, SP
damage = 32,8
animtype = up
hitflag = MAF
guardflag = M
sprpriority = 3
sparkno = -1
guard.sparkno = -1
numhits = 1
hitsound = s1800,0
guardsound = S121,0
pausetime = 0,8
getpower  = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 14 + (root,var(2) = 1)*17
ground.hittime  = 14 + (root,var(2) = 1)*17
ground.velocity = -3,-7
guard.velocity = -2 - (root,var(2) = 0)*2
air.velocity = -3,-7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 66
palfx.sinadd = 50,100,110, 3
fall = 1
air.fall = 1
fall.recover = 0

[State 3122, 3]
type = HitDef
trigger1 = moveguarded = 10 || (movecontact = 10 && !(movehit >= 1))
attr = S, SP
damage = 32,8
animtype = up
hitflag = MAF
guardflag = M
sprpriority = 3
sparkno = -1
guard.sparkno = -1
numhits = 1
hitsound = s1800,0
guardsound = S121,0
pausetime = 0,10
getpower  = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 14 + (root,var(2) = 1)*17
ground.hittime  = 14 + (root,var(2) = 1)*17
ground.velocity = -7,-7
guard.velocity = -2 - (root,var(2) = 0)*2
air.velocity = -3,-7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 66
palfx.sinadd = 50,100,110, 3
fall = 1
air.fall = 1
fall.recover = 0

[State 3121, 3]
type = Explod
trigger1 = movehit
trigger1 = NumExplod(4003) = 0
id = 4003
anim = 4003
pos = 0, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 3121, 3]
type = Explod
trigger1 = moveguarded
trigger1 = NumExplod(4009) = 0
id = 4009
anim = 4009
pos = 10, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1

[State 1000, 1]
type = PlaySnd
trigger1 = time = 0
value = 1800, 0

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

;---------------------[]

[State 200, 7]
type = destroyself
trigger1 = animtime = 0

;----------------------------------------------------------------------------
;空牙用雷
[Statedef 1602]
type = S
ctrl = 0
anim = 1602
velset = 0,0
movetype = A
physics = N
sprpriority = 8



[State 3122, 3]
type = HitDef
trigger1 = 1
persistent = 0
attr = S, SP
damage = 32,8
animtype = up
hitflag = MAF
guardflag = M
sprpriority = 3
sparkno = -1
guard.sparkno = -1
numhits = 1
hitsound = s1800,0
guardsound = S121,0
pausetime = 0,8
getpower  = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 14 + (root,var(2) = 1)*17
ground.hittime  = 14 + (root,var(2) = 1)*17
ground.velocity = -3,-7
guard.velocity = -2 - (root,var(2) = 0)*2
air.velocity = -3,-7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 66
palfx.sinadd = 50,100,110, 3
fall = 1
air.fall = 1
fall.recover = 0

[State 3122, 3]
type = HitDef
trigger1 = moveguarded = 10 || (movecontact = 10 && !(movehit >= 1))
trigger2 = movecontact = 5 && root,palno = 12 
trigger3 = movecontact = 15 && root,palno = 12
trigger4 = movecontact = 15 && root,palno = 12
attr = S, SP
damage = 32,8
animtype = up
hitflag = MAF
guardflag = M
sprpriority = 3
sparkno = -1
guard.sparkno = -1
numhits = 1
hitsound = s1800,0
guardsound = S121,0
pausetime = 0,10
getpower  = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 14 + (root,var(2) = 1)*17
ground.hittime  = 14 + (root,var(2) = 1)*17
ground.velocity = -7,-7
guard.velocity = -2 - (root,var(2) = 0)*2
air.velocity = -3,-7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 66
palfx.sinadd = 50,100,110, 3
fall = 1
air.fall = 1
fall.recover = 0

[State 3121, 3]
type = Explod
trigger1 = movehit
trigger1 = NumExplod(4003) = 0
id = 4003
anim = 4003
pos = 0, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 3121, 3]
type = Explod
trigger1 = moveguarded
trigger1 = NumExplod(4009) = 0
id = 4009
anim = 4009
pos = 10, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1

[State 1000, 1]
type = PlaySnd
trigger1 = time = 0
value = 1800, 0

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

;---------------------[]

[State 200, 7]
type = destroyself
trigger1 = animtime = 0
;----------------------------------------------------------------------------
;空牙追加入力用雷
[Statedef 1611]
type = S
ctrl = 0
anim = 1602
velset = 0,0
movetype = A
physics = N
sprpriority = 8


;---------------------[攻撃]
[State 3122, 3]
type = HitDef
trigger1 = 1
persistent = 0
attr = S, SP
damage = 12,4
animtype = up
hitflag = MAF
guardflag = M
sprpriority = 3
sparkno = -1
guard.sparkno = -1
numhits = 1
hitsound = s1800,0
guardsound = S121,0
pausetime = 0,10
getpower  = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -3,-7
guard.velocity = -1
air.velocity = -3,-7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 66
palfx.sinadd = 50,100,110, 3
fall = 1
air.fall = 1
fall.recover = 0

[State 3122, 3]
type = HitDef
trigger1 = animelem >= 7
trigger1 = moveguarded || !(movehit) 
persistent = 0
attr = S, SP
damage = 12,4
animtype = up
hitflag = MAF
guardflag = M
sprpriority = 3
sparkno = -1
guard.sparkno = -1
numhits = 1
hitsound = s1800,0
guardsound = S121,0
pausetime = 0,8
getpower  = 0,0
givepower = 0,0
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -3,-7
guard.velocity = -1
air.velocity = -3,-7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
palfx.time = 66
palfx.sinadd = 50,100,110, 3
fall = 1
air.fall = 1
fall.recover = 0

[State 3121, 3]
type = Explod
trigger1 = movehit
trigger1 = NumExplod(4003) = 0
id = 4003
anim = 4003
pos = 0, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1
ignorehitpause = 1

[State 3121, 3]
type = Explod
trigger1 = moveguarded
trigger1 = NumExplod(4009) = 0
id = 4009
anim = 4009
pos = 10, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1

[State 1000, 1]
type = PlaySnd
trigger1 = time = 0
value = 1800, 0

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

;---------------------[]

[State 200, 7]
type = destroyself
trigger1 = animtime = 0


;----------------------------------------------------------------------------


;---------------------------------------------------------------------------
; 弱空牙着地
[Statedef 1605]
type    = S
physics = N
anim = 1606
sprpriority = 1
ctrl = 0

[State 200, 1]
type = Turn
triggerall = var(30) != 0
triggerall = time = 0
trigger1 = Facing = 1
trigger1 = pos X > enemynear(var(34)),pos X
trigger2 = Facing = -1
trigger2 = pos X < enemynear(var(34)),pos X
IgnoreHitPause = 1

[state a]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[state a]
type = velmul
trigger1 = 1
x = 0.85

[State 191, Snd 1]
type = PlaySnd
trigger1 = time = 0
value = 106,0

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; 強空牙・覚醒
[Statedef 1601]
type    = S
movetype= A
physics = N
juggle  = ifelse(var(53) = 0,6,0)
poweradd= ifelse(var(53) = 0,94,0)
velset = 0,0
anim = 1601
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

;---------------------[ヘルパー]
[state a];雷
type = Helper
trigger1 = animelem = 6
id = 1602
name = "honoo"
sprpriority = 5
pos = 65,0
postype = p1
stateno = 1607
helpertype = normal
ignorehitpause = 1
persistent = 0
keyctrl = 0
ownpal = 1


;---------------------[無敵]
[state a]
type = nothitby
trigger1 = time <= 5
value = SCA
time = 1

[State 200, 1]
type = Turn
triggerall = var(30) != 0
triggerall = time = 0
trigger1 = Facing = 1
trigger1 = pos X > ((enemynear(var(34)),pos X) + 5)
trigger2 = Facing = -1
trigger2 = pos X < ((enemynear(var(34)),pos X) - 5)
IgnoreHitPause = 1


;---------------------[移動]
[State 1000, 2]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
x = 10

[state a]
type = statetypeset
trigger1 = animelem = 8
value = A

[state a]
type = velset
trigger1 = animelem = 8
x = 1
y = -11

[state a]
type = veladd
trigger1 = animelem = 8,>0
y = 0.525

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 6 
persistent = 0
attr = S, SP
damage = ifelse(var(2) = 0,104,32),ifelse(var(2) = 0,13,9)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 0,0
animtype = hard
guardflag = M
hitflag = MAF
priority = 8, Hit
pausetime = 10, 10
sparkno = -1
sparkxy = -7, -56
hitsound = s1800, 0
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -3,-12
guard.velocity = -7
air.type = High
air.velocity = -3,-12
yaccel = 0.5
air.hittime = 12
fall = 1
fall.recover = 0
palfx.time = 60
palfx.mul = 110,140,220
;palfx.sinadd = 63,65,68,18
;palfx.add = 220,130,114
palfx.add = 20,10,10
ground.cornerpush.veloff = -10

[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 7 
persistent = 0
attr = A, SP
damage = ifelse(var(2) = 0,48,64),ifelse(var(2) = 0,10,10)
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 0,0
animtype = hard
guardflag = M
hitflag = MAF
priority = 8, Hit
pausetime = 4, 4
sparkno = -1
sparkxy = -7, -56
hitsound = s1800, 0
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -1,-12
guard.velocity = -7
air.type = High
air.velocity = -1,-12
yaccel = 0.5
air.hittime = 12
fall = 1
fall.recover = 0
palfx.time = 60
palfx.mul = 110,140,220
;palfx.sinadd = 63,65,68,18
;palfx.add = 220,130,114
palfx.add = 20,10,10
ground.cornerpush.veloff = -5

[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 8
trigger1 = var(2) =1
persistent = 0
attr = A, SP
damage = 32,8
getpower = ifelse(var(53) = 0,ifelse(var(2) = 0,125,47),0),ifelse(var(53) = 0,ifelse(var(2) = 0,63,16),0)
givepower = 0,0
animtype = hard
guardflag = M
hitflag = MAF
priority = 8, Hit
pausetime = 4, 4
sparkno = -1
sparkxy = -7, -56
hitsound = s1800, 0
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -1,-12
guard.velocity = -8
air.type = High
air.velocity = -1,-12
yaccel = 0.5
air.hittime = 12
fall = 1
fall.recover = 0
palfx.time = 60
palfx.mul = 110,140,220
;palfx.sinadd = 63,65,68,18
;palfx.add = 220,130,114
palfx.add = 20,10,10
ground.cornerpush.veloff = -5

[State 3121, 3]
type = Explod
trigger1 = movehit
trigger1 = NumExplod(4003) = 0
id = 4003
anim = 4003
pos = 0, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1
ignorehitpause = 1

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1600, 0
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1101, 0



;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

;---------------------[]
[State 1505, 9]
type = ChangeState
triggerall = var(30) = 0
triggerall = statetype = A
triggerall = command = "強空牙"
triggerall = time = [0,43]
trigger1 = movecontact
trigger2 = NumTarget(1601) = 1
value = 1603

[State 00]
type = ChangeState
triggerall = Vel Y > 0
triggerall = palno = 12
trigger1 = Pos Y >= 0
value = 0
ctrl = 1

[State 00]
type = ChangeState
triggerall = Vel Y > 0
triggerall = palno != 12
trigger1 = Pos Y >= 0
value = 1610

;---------------------------------------------------------------------------
; 強空牙・覚醒・追加入力
[Statedef 1603]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= ifelse(var(53) = 0,32,0)
velset = 0,0
anim = 1600
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 200, 1]
type = Turn
triggerall = var(30) != 0
triggerall = time = 0
trigger1 = Facing = 1
trigger1 = pos X > enemynear(var(34)),pos X
trigger2 = Facing = -1
trigger2 = pos X < enemynear(var(34)),pos X
trigger3 = p2bodydist X <= -20
trigger3 = enemynear(var(34)),pos Y < 0
trigger3 = enemynear(var(34)),statetype = A
IgnoreHitPause = 1


;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 3210, 1
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1101, 0

;---------------------[移動]
[State 1000, 2]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
x = 10

[state a]
type = statetypeset
trigger1 = animelem = 8
value = A

[state a]
type = velset
trigger1 = animelem = 8
x = 1
y = -7.5 + (palno = 12)*2

[state a]
type = veladd
trigger1 = animelem = 8,>0
y = 0.5

;---------------------[無敵]
[state a]
type = nothitby
trigger1 = time <= 11 + (palno = 12)*9
value = SCA
time = 1

[State 3121, 3]
type = Explod
trigger1 = movehit
trigger1 = NumExplod(4003) = 0
id = 4003
anim = 4003
pos = 0, -60
postype = p2
bindtime = -1
removetime = 48
sprpriority = 1
ownpal = 1
ignorehitpause = 1

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = AnimElem >= 7
attr = S, SP
damage = ifelse(var(2) = 0,12,12),ifelse(var(2) = 0,10,6)
getpower = 0,0
givepower = 0,0
animtype = hard
guardflag = M
hitflag = MAF
priority = 6, Hit
pausetime = 6, 6
sparkno = -1
sparkxy = -7, -56
hitsound = s1800, 0
guard.sparkno = s4009
guardsound = s121, 0
ground.type = high
ground.slidetime = 28
ground.hittime  = 28
ground.velocity = -3,-9
guard.velocity = -3
air.type = High
air.velocity = -3,-9
yaccel = 0.5
air.hittime = 12
fall = 1
fall.recover = 0
palfx.time = 60
palfx.mul = 110,140,220
;palfx.sinadd = 63,65,68,18
;palfx.add = 220,130,114
palfx.add = 20,10,10
ground.cornerpush.veloff = -15

;---------------------[ヘルパー]
[state a];雷
type = Helper
trigger1 = animelem = 9
id = 1611
name = "honoo"
sprpriority = 5
pos = 70,30
postype = p1
stateno = 1611
helpertype = normal
ignorehitpause = 1
persistent = 0
keyctrl = 0
ownpal = 1

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0


[State 00]
type = ChangeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 1605
;---------------------------------------------------------------------------
; 強空牙着地
[Statedef 1610]
type    = S
physics = N
anim = 1610+ var(2)*1
sprpriority = 1
ctrl = 0

[State 00]
type = ChangeState
triggerall = palno = 12
trigger1 = time = 0
value = 0 
ctrl = 1

[State 200, 1]
type = Turn
triggerall = var(30) != 0
triggerall = time = 0
trigger1 = Facing = 1
trigger1 = pos X > enemynear(var(34)),pos X
trigger2 = Facing = -1
trigger2 = pos X < enemynear(var(34)),pos X
IgnoreHitPause = 1

[state a]
type = velset
trigger1 = time = 0
x = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[state a]
type = velmul
trigger1 = 1
x = 0.85

[State 191, Snd 1]
type = PlaySnd
trigger1 = time = 0
value = 106,0


[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; 嵐討・覚醒
[Statedef 1700]
type    = S
movetype= A
physics = N
juggle  = ifelse(var(53) = 0,4,0)
poweradd= ifelse(var(53) = 0,32,0)
velset = 0,0
anim = 1700 + (palno = 12)*5
ctrl = 0
sprpriority = 1

;---------------------[乱舞奥義]
[State 200, 0]
type = VarAdd
trigger1 = var(53) > 0
trigger1 = movecontact
var(53) = -100
persistent = 0
ignorehitpause = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 200,random%2
channel = 0

[State 271, 0]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 1

;12P時、当身で無理矢理投げる
[State -2, 0];
type = ReversalDef
trigger1 = palno = 12
trigger1 = time = 0 || time >= 1
attr = S, ST
reversal.attr = SC,AA,AP,AT
hitflag = MAF
priority = 7, miss
pausetime = 0,0
hitsound = -1,0
p1stateno = 1701
p2stateno = 1702

[State 200, 3]
type = HitDef
trigger1 = time = 0
trigger1 = palno != 12
ID = 3000
attr = S, ST
hitflag = M-
getpower  = 50,50
givepower = 20,20
sparkno = -1
numhits = 0
pausetime = 0,0
ground.type = high
ground.hittime = 14
ground.slidetime = 14
fall = 1
p1stateno = 1701
p2stateno = 1702


[State 200, 4]
type = ChangeState
Trigger1 = palno != 12
trigger1 = AnimTime = 0
value = 0 + (palno = 12)*1705
ctrl = 1

[State 200, 4]
type = ChangeState
Trigger1 = palno = 12
trigger1 = AnimTime = 0
value = 1705
;---------------------------------------------------------------------------
; 嵐討・覚醒
[Statedef 1705]
type    = S
movetype= A
physics = N
juggle  = ifelse(var(53) = 0,4,0)
velset = 0,0
anim = 1705
ctrl = 0
sprpriority = 1

[State 1000, 4]
type = PlaySnd
trigger1 = AnimElem = 3
value = 200,random%2
channel = 0

[State 271, 0]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 1

[State 200, 3]
type = HitDef
trigger1 = time = 0
ID = 3000
attr = S, ST
hitflag = M-
getpower  = 50,50
givepower = 20,20
sparkno = -1
numhits = 0
pausetime = 0,0
ground.type = high
ground.hittime = 14
ground.slidetime = 14
fall = 1
p1stateno = 1701
p2stateno = 1702


[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;[][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][][]
;一刀・嵐討（１Ｐ）
[Statedef 1701]
type = S
movetype = A
physics = S
anim = 1701
poweradd = 0
velset = 0,0
ctrl = 0



[State 200, 4]
type = velset
trigger1 = Time = [14,53]
x = 1.8

[State 3200, 1]
type = Width
trigger1 = 1
value = 50,0

[State 1105, 3]
type = TargetBind
trigger1 = time <= 52
Pos = 50,0

;---------------------[効果音]
[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 12
trigger3 = AnimElem = 19
trigger4 = AnimElem = 31
value = 200, random%2
channel = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 207, random%2

[State 1000, 1]
type = PlaySnd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 19
trigger3 = AnimElem = 31
value = 202, random%2

;---------------------[エフェクト]
[State explod];血
type = Explod
trigger1 = AnimElem = 12
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

[State explod];血
type = Explod
trigger1 = AnimElem = 19
anim = 4001
id = 4001
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

[State explod];血
type = Explod
trigger1 = AnimElem = 31
anim = 4006
id = 4006
sprpriority = 4
postype = p2
facing = -1
pos = 0,enemy,const(size.mid.pos.y) + 0
bindtime = 1
supermove = 0
under = 0
scale = const(size.xscale),const(size.yscale)
trans = addalpha
alpha = 256,60
persistent = 0
ignorehitpause = 1

[State 1105, 3]
type = HitAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 12
trigger3 = AnimElem = 19
trigger4 = AnimElem = 31
value = 1

[State 903, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 3
value = -15
kill = 0

[State 903, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 12
value = -10
kill = 0

[State 903, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 19
value = -10
kill = 0

[State 903, 11]
type = TargetLifeAdd
trigger1 = AnimElem = 31
value = -15

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;一刀・嵐討（２Ｐ）
[Statedef 1702]
type = S
movetype = H
physics = S
ctrl = 0

[State 200, 4]
type = ChangeAnim2
trigger1 = Time = 0
value = 1702

[State 1105, 3]
type = BindToTarget
trigger1 = anim = 1702
Pos = 45
time = 1

[State 1105, 3]
type = SprPriority
trigger1 = time = 0
value = -5

[State 1105, 3]
type = posset
trigger1 = time = 0
y = 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 1703
;--------------------------------------------------
;嵐討(打ち上げ)
[Statedef 1703]
type = A
movetype = H
physics = N

[state a]
type = destroyself
trigger1 = Ishelper
IgnoreHitPause = 1

[State 8140, 1]
type = VelSet
trigger1 = Time >= 0
x = 0
y = 0

[State 8140, 2]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = animexist(5060)
value = 5060

[State 8140, 3]
type = ChangeAnim
trigger1 = Time >= 0
trigger1 = !animexist(5060)
value = 5030

[State 8140, 4]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1704

;---------------------------------------
;うつぶせやられ
[Statedef 1704]
type = A
movetype = H
physics = N
velset = 0,0

[State 8145, 1]
type = Velset
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-1.3,1.3)
y = -12

[State 8145, 1]
type = VelAdd
trigger1 = Time > 0
y = .5

[State 8145, 1]
type = VelAdd
trigger1 = Time >= 30
y = .3

[State 8145, 2]
type = EnvShake
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
time = 8

[State 8145, 2]
type = ChangeAnim
trigger1 = animexist(5061)
trigger1 = Time = 0
value = 5061

[State 8145, 3]
type = ChangeAnim
trigger1 = !animexist(5061)
trigger1 = Time = 5
value = 5050

[State 5050, 4]
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
trigger1 = Command = "recovery"
value = 5200

[State 8145, 4]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100
;------------------------------------------------------
;束風
[Statedef 1800]
type = S
movetype = I
physics = N
anim = 700 + var(1)*3000
poweradd = 0
velset = 0
ctrl = 0

[State 3500, 1]
type = NotHitBy
trigger1 = var(1) = 1
trigger1 = palno = 12
trigger1 = 1
value = ,AA,AP
time = 1

[State 3500, 1]
type = NotHitBy
trigger1 = var(1) = 1
trigger1 = palno != 12
trigger1 = Time <= 20
value = ,AA,AP
time = 1

[State 250, 4]
type = VelSet
trigger1 = AnimElem = 2
x = ifelse(var(30)=1,6,8)

[State 250, 4]
type = VelSet
trigger1 = AnimElem = 5, >= 0
trigger1 = AnimElem = 8, < 0
x = 5

[State 250, 6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 800, 6]
type = PlayerPush
trigger1 = animelem = 2,>=0
trigger1 = animelem = 8,<0
value = 0

[State 3120, 0]
type = Width
trigger1 = animelem = 3,>=0
trigger1 = animtime <= 0
value =  -5, 0

[State 105, 2]
type = Turn
trigger1 = (animtime = 0)
trigger1 = p2dist X < 0

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 3] ;覚醒解除
type = varset
trigger1 = var(32) = 1
trigger1 = palno <= 6
var(1) = 0

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
trigger2 = roundsexisted = 0
trigger2 = teammode = turns
trigger2 = roundno > 0
trigger2 = var(1) = 0
value = 190




[State 5900, 3] ;強制覚醒変身
type = ChangeState
trigger1 = var(1) = 0
trigger1 = var(25) = 1
trigger1 = var(32) = 0
value = 3190


[State 0, 1]
type = ChangeAnim
trigger1 = Anim != var(1)*3000 && Anim != 5+var(1)*3000
trigger2 = Anim = 5 + var(1)*3000 && AnimTime = 0 ;Turn anim over
value = var(1)*3000



;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;常時管理ステート
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef -2]
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;::::::::
[State -2, AI起動用ヘルパー]
type=helper
trigger1=!NumHelper(20000)
trigger1= roundstate= 2 || roundstate= 1
trigger1=(PrevStateNo= [190,199]) || PrevStateNo=5900 || PrevStateNo=3190 || var(13) != 0 || stateno = 0 || (roundstate= 1 && stateno = 3190)
trigger1=alive
trigger1=var(30)=0
helpertype=normal
name="AI"
stateno=20000
ID=20000
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0
IgnoreHitPause = 1

;念のため↓も付けておく
[State -3, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(20000)
trigger1= stateno!=20000
value=20000

[state -2, a];ダッシュ音停止
type = StopSnd
trigger1 = stateno != 100
channel = 1

[state -2, a];右向き設定
type = varset
trigger1 = var(10) = 0
trigger1 = facing = 1
v = 10
value = 1

[state -2, a];左向き設定
type = varset
trigger1 = var(10) = 0
trigger1 = facing = -1
v = 10
value = 2

[state a]
type = playerpush
trigger1 = statetype = A
trigger1 = movetype != H
value = 1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;::::::::パレットによるモード判別(1でＥＸ)
[state -2, a]
type = null;varset
trigger1 = palno = 1
trigger2 = palno = 2
trigger3 = palno = 3
trigger4 = palno = 4
trigger5 = palno = 5
trigger6 = palno = 6
v = 1
value = 0

[state -2, a]
type = varset
trigger1 = palno = 7
trigger2 = palno = 8
trigger3 = palno = 9
trigger4 = palno = 10
trigger5 = palno = 11
trigger6 = palno = 12
v = 1
value = 1


;::::::::カウンターヒット設定
[state a]
type = varset
trigger1 = enemy,movetype != A
v = 8
value = 0

[state a]
type = varset
trigger1 = enemy,movetype = A
v = 8
value = 1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ダメージ時のエフェクト、サウンドの消去
;//////////////////////////////////////////////////////////////////////////
;ダメージ時のエフェクトの消去
[State 1];
type = removeexplod
trigger1 = MoveType = H
ID = 4000

;ダメージ時のサウンドの消去
[state a]
type = stopsnd
trigger1 = MoveType = H
channel = 1

;ダメージ時のサウンドの消去
[state a]
type = stopsnd
trigger1 = MoveType = H
channel = 3

;ダメージ時のサウンドの消去
[state a]
type = stopsnd
trigger1 = MoveType = H
channel = 4

;ダメージ時の残像の消去
[State 1];
type = afterimagetime
trigger1 = MoveType = H
trigger2 = prevstateno = 101
trigger3 = prevstateno = 105
trigger4 = prevstateno = 1400
trigger5 = prevstateno = 1450
trigger6 = stateno = 0
trigger7 = stateno = 20
trigger8 = stateno = 10
trigger9 = stateno = 40
trigger10= prevstateno = 100 && stateno != 101
trigger11= prevstateno = 2200
trigger12= ctrl
time = 0

;///////////////////////////////////////////////////////////////////////
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;コンボによるダメージ補正
;//////////////////////////////////////////////////////////////////////////

[state a];補正初期化
type = varset
trigger1 = enemy,movetype != H
trigger2 = enemynear(var(34)),movetype != H
trigger3 = enemynear(var(34)),stateno = [120,155]
fvar(5) = 1.0
; 
;---------------------[連続技補正（力）]
[state a]
type = varset
triggerall = var(2) = 0
trigger1 = enemy,gethitvar(hitcount) = 0
trigger2 = enemy,gethitvar(hitcount) = 1
trigger3 = enemynear(var(34)),movetype != H || enemynear(var(34)),stateno = [120,155]
fvar(5) = 1.0

type = varset
triggerall = var(2) = 0
trigger1 = enemy,gethitvar(hitcount) = 2
fvar(5) = 0.8

[state a]
type = varset
triggerall = var(2) = 0
trigger1 = enemy,gethitvar(hitcount) = 3
fvar(5) = 0.7 

[state a]
type = varset
triggerall = var(2) = 0
trigger1 = enemy,gethitvar(hitcount) = 4
fvar(5) = 0.6 

[state a]
type = varset
triggerall = var(2) = 0
trigger1 = enemy,gethitvar(hitcount) >= 5
fvar(5) = 0.5



;---------------------[連続技補正（技）]
[state a]
type = varset
triggerall = var(2) = 1
trigger1 = enemy,gethitvar(hitcount) = 0
trigger2 = enemy,gethitvar(hitcount) = 1
trigger3 = enemynear(var(34)),movetype != H || enemynear(var(34)),stateno = [120,155]
fvar(5) = 1.0 - (var(53) > 0)*0.3

[state a]
type = varset
triggerall = var(2) = 1
trigger1 = enemy,gethitvar(hitcount) = 2
fvar(5) = 0.9 - (var(53) > 0)*0.2

[state a]
type = varset
triggerall = var(2) = 1
trigger1 = enemy,gethitvar(hitcount) = 3
fvar(5) = 0.8 - (var(53) > 0)*0.2

[state a]
type = varset
triggerall = var(2) = 1
trigger1 = enemy,gethitvar(hitcount) = 4
fvar(5) = 0.7 - (var(53) > 0)*0.2

[state a]
type = varset
triggerall = var(2) = 1
trigger1 = enemy,gethitvar(hitcount) >= 5
fvar(5) = 0.6 - (var(53) > 0)*0.2

[state a];補正初期化
type = varset
trigger1 = enemy,movetype != H
trigger2 = enemynear(var(34)),movetype != H
trigger3 = enemynear(var(34)),stateno = [120,155]
fvar(5) = 1.0

;---------------------[]

[state a];攻撃補正
type = attackmulset
trigger1 = 1
trigger1 = !(palno = 12)
value = fvar(5)


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;//////////////////////////////////////////////////////////////////////////
;ダメージボイス
[state a]
type = PlaySnd
triggerall = stateno = 5000 ||  stateno = 5010 || stateno = 5020
triggerall = time = 0
triggerall = alive = 1
trigger1 = GetHitVar(animtype) = 0
value = 5000,0+(random%7)
persistent = 0

[state a]
type = PlaySnd
triggerall = stateno = 5000 ||  stateno = 5010 || stateno = 5020
triggerall = time = 0
triggerall = alive = 1
trigger1 = GetHitVar(animtype) = 1
value = 5000,0+(random%7)
persistent = 0

[state a]
type = PlaySnd
triggerall = stateno = 5000 ||  stateno = 5010 || stateno = 5020
triggerall = time = 0
triggerall = alive = 1
trigger1 = GetHitVar(animtype) = 2
trigger2 = GetHitVar(animtype) = 3
trigger3 = GetHitVar(animtype) = 4
value = 5000,0+(random%7)
persistent = 0




[State 1];負け
type = varset
triggerall = lose
trigger1 = roundstate = 4
v = 25
value = 1


[state a];KO
type = playsnd
triggerall = var(12) = 0
triggerall = var(25) = 0
trigger1 = loseKO
trigger2 = life = 0
IgnoreHitPause = 1
persistent = 0
value = 5002,random%2
channel = 4

[state a];KO
type = playsnd
triggerall = var(12) = 0
triggerall = var(25) = 1
trigger1 = loseKO
trigger2 = life = 0
IgnoreHitPause = 1
persistent = 0
value = 12,random%3
channel = 4

[state a]
type =  varset
trigger1 = RoundState = 3
IgnoreHitPause = 1
v = 12
value = 1

[state a]
type = varset
trigger1 = RoundState = 2
IgnoreHitPause = 1
v = 12
value = 0


[State 1];勝利
type = varset
trigger1 = win
v = 9
value = 2

[State -2, システム];投げハメ防止
type = NotHitBy
triggerall = HitOver
trigger1 = StateNo = 5001 || StateNo = 5011
Value = , NT,ST,HT
time = 6

[State -2, システム];投げハメ防止
type = NotHitBy
triggerall = 1
trigger1 = (StateNo = [150,155]) 
Value = , NT,ST,HT
time = 1

;-------------------------------------------------------------------------
;デバッグ
;-------------------------------------------------------------------------
;表示を横に加える
[State -2, デバッグ表示その1]
type = AppendToClipboard
trigger1 = 1
text = " Pos X=%d,Y=%d"
params = ceil(Pos X),floor(Pos Y)
ignorehitpause = 1

;表示を下に加える
[State -2, デバッグ表示その2]
type = AppendToClipboard
trigger1 = 1
text = "\nDist X=%d,Y=%d"
params = ceil(P2Dist X),floor(P2Dist Y)
ignorehitpause = 1

;表示を下に加える
[State -2, デバッグ表示その2]
type = AppendToClipboard
trigger1 = 1
text = "\nbodyDist X=%d,Y=%d"
params = floor(P2BodyDist X),ceil(P2BodyDist Y)
ignorehitpause = 1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ヘルパー
;//////////////////////////////////////////////////////////////////////////


;---------------------[ヘルパー]
[state a];ゲージ
type = Helper
trigger1 = time >= 2
trigger1 = numhelper(10000) = 0
trigger1 = numhelper(11000) = 0
id = 11000
name = "g"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 11000
helpertype = normal
pausemovetime = 99999999;-1
keyctrl = 0 
ownpal = 1

[State -2,監視用ヘルパー]
Type = Helper
Triggerall = !NumHelper(60000)
Triggerall = alive
Trigger1 = var(30) != 0
Helpertype = Normal
Name = "search"
Postype = p1
Stateno = 60000
ID = 60000
Pausemovetime = 99999
Persistent = 99999
Ignorehitpause = 1
Keyctrl = 0
Ownpal = 1

[State -2, 相手ヘルパー確認用ヘルパー:F4対策]
Type = HelPer
Triggerall = RoundState != 0
Triggerall = !NumHelPer(70000)
Triggerall = !IsHelper
Triggerall = var(30) != 0
Trigger1 = NumHelper(60000)
Trigger1 = Helper(60000),ID > Helper(60000),Var(2)
HelPerType = Normal
Name = "search_F4"
StateNo = 70000
ID = 70000
OwnPal = 1
PauseMoveTime= 99999999
SuperMoveTime= 99999999
IgnoreHitPause = 1


[State -2, a]
type = palfx
trigger1 = stateno = [2900,2999]
trigger1 = time % 2 = 0
time = 1
add = 0,0,255
mul = 0,0,255
color = 256
ignorehitpause = 0

[state a]
type = destroyself
triggerall = Ishelper
trigger1 = stateno = [0,1000]
trigger2 = stateno = [3000,3105]
trigger3 = stateno = [5000,5120]
trigger4 = movetype = H
trigger5 = statetype = L
IgnoreHitPause = 1

;---------------------[]
;乱舞奥義色々
;---------------------[]
[State 200, 0]
type = Varset
trigger1 = var(53) < 0
var(53) = 0
ignorehitpause = 1

[State -2, a];ピカピカ光る
type = palfx
trigger1 = var(2) = 1
trigger1 = var(53) > 0
trigger1 = time % 3 = 0
time = 1
add = 0,0,255
mul = 0,0,255
color = 256
ignorehitpause = 0

[State -2, 0];オリコンゲージ自動減少
type = VarAdd
trigger1 = var(53) > 0
v = 53
value = -1

;---------------------[]
;防御補正(試行錯誤中)
;---------------------[]
[state -2, HEAT];ライフ減少・覚醒通常カラー用
type = lifeadd
triggerall = palno != 12
triggerall = roundstate = 2
triggerall = var(1) = 1
triggerall = var(3) = 0
triggerall = life > 1
triggerall = gametime % 11 = 0
trigger1 = (stateno = [5000,5120]) 
trigger2 = movetype != H && (stateno != [5000,5120]) && (stateno != [120,155])
trigger3 = statetype = L && (stateno != [5000,5120]) && (stateno != [120,155])
trigger4 = stateno = [120,155]
kill = 0
value = -1
ignorehitpause = 1

[State -2, 0]
type = DefenceMulSet
trigger1 = var(1) = 0
trigger1 = stateno != [120,155]
value = 1.1 ; 覚醒前はダメージ1割増し 
ignorehitpause = 1

[State 50, 1]
type = VarSet
triggerall = !(numpartner = 1 && partner,alive)
trigger1 = var(55) = 1 || var(55) = -1 || var(55) = -2
trigger1 = stateno != 101 
trigger1 = stateno != 140
trigger1 = stateno != [150,155]
trigger1 = stateno != [120,131]
trigger1 = !(var(1) = 1 && P2BodyDist X <= 60 + (1-2*(enemynear(var(34)),facing=facing))*EnemyNear(var(34)),Vel X*6)
trigger1 = !(var(1) = 0 && P2BodyDist X <= 20)
trigger2 = var(55) = -2
trigger2 = (stateno = 120 && time >= 5) || (var(16) != 0 && enemynear(var(34)),stateno = var(16))
v = 55
value = 0
ignorehitpause = 1

[State -3,ガード用ヘルパー]
Type = Helper
Trigger1 = !NumHelper(40000)
Helpertype = Normal
Name = "guard1"
Postype = p1
Stateno = 40000
ID = 40000
Pausemovetime = 99999
Persistent = 99999
Ignorehitpause = 1
Keyctrl = 0
Ownpal = 1

[State 810, 2];飛び道具用
type = powerAdd
triggerall = var(53) = 0
trigger1 = helper(1010),moveguarded = 1
value = ifelse(var(2) = 0,63,16)
persistent = 0

[State 810, 4];飛び道具用
type = powerAdd
triggerall = var(53) = 0
trigger1 = helper(1510),moveguarded = 1
value = ifelse(var(2) = 0,63,32)
persistent = 0

;---------------------[]
;分身防止
;---------------------[]
[State 200, 7]
type = destroyself
triggerall = !(name ="Shinnosuke Kagami")
trigger1 = stateno = [5000,5120]
trigger2 = anim = [5000,5170]
trigger3 = statetype = L
supermove = 1
pausemovetime = 999999
ignorehitpause = 1

;---------------------[]
;12P仕様(狂モード)
;---------------------[]
[State -2,]
type = SelfState
triggerall = PalNo = 12
triggerall = gametime >= 1
trigger1 = gametime != sysvar(3)
value = 0
ctrl = 1
ignorehitpause = 1

[State -2]
type = NotHitBy
triggerall = palno = 12
triggerall = gametime >= 1
trigger1 = var(23) = 1
value = SCA
time = 1
ignorehitpause = 1

;12p用ヘルパー
[State -2,]
Type = Helper
triggerall = palno = 12
Trigger1 = !NumHelper(40001)
Helpertype = Normal
Name = "12P"
Postype = p1
Stateno = 40001
ID = 40001
Pausemovetime = 99999
Persistent = 99999
Ignorehitpause = 1
Keyctrl = 0
Ownpal = 1

[state a];攻撃補正
type = attackmulset
trigger1 = palno = 12
trigger1 = p2life > 1000
value = 1.3 + 1*(p2life/1000)

[state a];攻撃補正
type = attackmulset
trigger1 = palno = 12
trigger1 = p2life <= 1000
value = 1.3

;連続ダメージ無効(地上30以上、空中10以上)
[State -2]
type = NotHitBy
triggerall = palno = 12
triggerall = movetype = H && stateno != [120,155]
trigger1 = gethitvar(hitcount) >= 10 || enemynear(var(34)),hitcount >= 10 
trigger1 = statetype = A 
trigger2 = gethitvar(hitcount)  >= 30 || enemynear(var(34)),hitcount >= 30
trigger2 = statetype = S || statetype = C
value = SCA
time = 1
ignorehitpause = 1

;大ダメージ無効(3000以上)
[State -2, 0]
type = lifeadd
trigger1 = palno = 12
trigger1 = gethitvar(damage)  >= 3000
value = gethitvar(damage)  
ignorehitpause = 1
persistent=0

[State -2, 0]
type = lifeadd
trigger1 = palno = 12
value = gethitvar(damage)*0.5   ; 12Pは耐久値二倍
ignorehitpause = 1
persistent=0

[state -2, HEAT];ライフ回復・12カラー用@
type = lifeadd
triggerall = palno = 12
triggerall = roundstate = 2
triggerall = statetype != L
triggerall = movetype != H || stateno = [120,155]
trigger1 = life = [500,999]
trigger1 = gametime % 5 = 0
value = 2
ignorehitpause = 1
[state -2, HEAT];ライフ回復・12カラー用@
type = lifeadd
triggerall = palno = 12
triggerall = roundstate = 2
triggerall = statetype != L
triggerall = movetype != H || stateno = [120,155]
trigger1 = life = [1,499]
trigger1 = gametime % 5 = 0
value = 3
ignorehitpause = 1

[state -2, HEAT];ライフ回復・12カラー用A
type = lifeadd
triggerall = palno = 12
triggerall = roundstate = 2
triggerall = (movetype = H && !(stateno = [120,155])) || statetype = L
trigger1 = life = [500,999]
trigger1 = gametime % 3 = 0
value = 3
ignorehitpause = 1
[state -2, HEAT];ライフ回復・12カラー用A
type = lifeadd
triggerall = palno = 12
triggerall = roundstate = 2
triggerall = (movetype = H && !(stateno = [120,155])) || statetype = L
trigger1 = life = [1,499]
trigger1 = gametime % 3 = 0
value = 5
ignorehitpause = 1

[state -2, HEAT];ゲージ増加・12カラー用
type = poweradd
triggerall = palno = 12
trigger1 = power < powermax
value = 1
ignorehitpause = 1

